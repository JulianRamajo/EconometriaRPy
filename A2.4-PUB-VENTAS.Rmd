---
title: 'TEMA 2: Modelo de regresión lineal con términos de interacción'
author:
  name: Julián Ramajo, ramajo@unex.es
  affiliation: GRADO EN ESTADÍSTICA | ECONOMETRIA (502243)
subtitle: 'Aplicación 2.4: Efectos diferenciados de la publicidad sobre las ventas'
output:
  html_document:
    theme: journal
    highlight: haddock
    toc: yes
    toc_depth: 2
    toc_float: yes
  pdf_document:
    toc: yes
    toc_depth: '2'
---

# Código R

```{r, message=FALSE}
# Lectura de librerías
library(tidyverse)
library(plotly)
library(magrittr)
# Lectura de datos
PUB_VENTAS <- read_csv("PUB_VENTAS.csv")
# Estimación del modelo lineal
model1 <- lm(data = PUB_VENTAS, formula = VENTAS ~ TV + RADIO)
summary(model1)
# Gráfica del ajuste
plot_ly(data = PUB_VENTAS) %>%
    add_trace(x = ~TV, y = ~RADIO, z = ~VENTAS, mode = "markers", type = "scatter3d",
              marker = list(size = 5, color = "blue", symbol = 104), name = "Observaciones") %>% 
    add_trace(z = model1$fitted.values, x = ~TV, y = ~RADIO, type = "mesh3d", 
              name = "Valores ajustados") %>%
    layout(scene = list(xaxis = list(title = 'TV'), yaxis = list(title = 'RADIO'),
                        camera = list(eye = list(x = -1.5, y = 1.5, z = 0)),
                        zaxis = list(title = 'VENTAS'), aspectmode='cube'))
# Estimación del modelo con interacción
model2 <- lm(data = PUB_VENTAS, formula = VENTAS ~ TV * RADIO)
summary(model2)
# Gráfica del ajuste
plot_ly(data = PUB_VENTAS) %>%
    add_trace(x = ~TV, y = ~RADIO, z = ~VENTAS, mode = "markers", type = "scatter3d",
              marker = list(size = 5, color = "blue", symbol = 104), name = "Observaciones") %>% 
    add_trace(z = model2$fitted.values, x = ~TV, y = ~RADIO, type = "mesh3d", 
              name = "Valores ajustados") %>%
    layout(scene = list(xaxis = list(title = 'TV'), yaxis = list(title = 'RADIO'),
                        camera = list(eye = list(x = -1.5, y = 1.5, z = 0)),
                        zaxis = list(title = 'VENTAS'), aspectmode='cube'))
```

# Código Python

```{python, message=FALSE}
# Lectura de librerías
import pandas as pd
import numpy as np
import statsmodels.formula.api as smf
import matplotlib.pyplot as plt
# # Lectura de datos
PUB_VENTAS = pd.read_csv('PUB_VENTAS.csv')
# Estimación del modelo lineal
model1 = smf.ols('VENTAS ~ TV + RADIO', data=PUB_VENTAS)
print(model1.fit().summary())
# Estimación del modelo con interacción
model2 = smf.ols('VENTAS ~ TV * RADIO', data=PUB_VENTAS)
print(model2.fit().summary())
```
