setwd("~/Dropbox/Mi Mac (Mac Pro de Julián)/Documents/GitHub/EcoMetricsR")
library(fpp3)
AIREF.ESP.data <- readr::read_csv("AIREF_ESP.csv")
#
macro.Spain <- AIREF.ESP.data %>%
mutate(quarter = yearquarter(obs)) %>%
select(-obs) %>%
as_tsibble(index = quarter)
macro.Spain
macro.Spain %>%
autoplot(PIR) +
labs(title = "Inversión en Bienes de Equipo", subtitle = "Volumen (2006=100)") +
xlab("Year")
#
View(macro.Spain)
View(AIREF.ESP.data)
macro.Spain %>%
autoplot(PIR) +
labs(title = "Inversión en Bienes de Equipo", subtitle = "Índice de volumen") + xlab("Year")
#
View(macro.Spain)
library(dynlm)
reg.lp <- dynlm(log(PIR) ~ log(YER) + log(OT) + log(CPE) + LTR + UCAP, data=macro.Spain)
library(dynlm)
reg.lp <- dynlm(log(PIR) ~ log(YER) + log(QT) + log(CPE) + LTR + UCAP, data=macro.Spain)
library(dynlm)
summary(reg.lp <- dynlm(log(PIR) ~ log(YER) + log(QT) + log(CPE) + LTR + UCAP, data=macro.Spain))
u.lp <- resid(reg.lp)
plot(u.lp)
View(macro.Spain)
macro.Spain$u.lp <- resid(reg.lp)
View(macro.Spain)
macro.Spain %>%
autoplot(u.lp) +
labs(title = "Residuos de largo plazo") + xlab("Year")
#
summary(reg.cp <- dynlm(d(log(PIR)) ~ d(log(YER)) + d(log(QT)) + d(log(CPE)) + d(LTR) + d(UCAP), data=macro.Spain))
#
summary(reg.cp <- dynlm(d(log(PIR)) ~ L(u.lp) + d(log(YER)) + d(log(QT)) + d(LTR) + d(UCAP), data=macro.Spain))
summary(reg.cp <- dynlm(d(log(PIR)) ~ d(log(YER)) + d(log(QT)) + d(LTR) + d(UCAP), data=macro.Spain))
summary(reg.cp <- dynlm(d(log(PIR)) ~ d(log(YER)) + d(log(QT)) + d(LTR) + d(UCAP) + L(u.lp), data=macro.Spain))
library(fpp3)
AIREF.ESP.data <- readr::read_csv("AIREF_ESP.csv")
#
macro.Spain <- AIREF.ESP.data %>%
mutate(quarter = yearquarter(obs)) %>%
select(-obs) %>%
as_tsibble(index = quarter)
macro.Spain
#
macro.Spain %>%
autoplot(PIR) +
labs(title = "Inversión en Bienes de Equipo", subtitle = "Índice de volumen") + xlab("Year")
macro.Spain %>%
model(TSLM(log(PIR) ~ log(YER) + log(QT) + log(CPE) + LTR + UCAP)) %>%
report()
reg.lp <-  macro.Spain %>%
model(TSLM(log(PIR) ~ log(YER) + log(QT) + log(CPE) + LTR + UCAP)) %>%
report()
augment(reg.lp)
augment(reg.lp) %>%
ggplot(aes(x = Quarter)) +
geom_line(aes(y = .resid, colour = "Resid")) +
xlab("Year") + ylab(NULL) +
ggtitle("Residuos de largo plazo") +
guides(colour=guide_legend(title=NULL))
View(macro.Spain)
augment(reg.lp) %>%
ggplot(aes(x = quarter)) +
geom_line(aes(y = .resid, colour = "Resid")) +
xlab("Year") + ylab(NULL) +
ggtitle("Residuos de largo plazo") +
guides(colour=guide_legend(title=NULL))
augment(reg.lp) %>%
ggplot(aes(x = quarter)) +
geom_line(aes(y = .resid, colour = "Resid")) +
xlab("Year") + ylab(NULL) +
ggtitle("Residuos de largo plazo")
#
reg.lp %>% gg_tsresiduals()
augment(reg.lp) %>%
ggplot(aes(x = quarter)) +
geom_line(aes(y = .resid, colour = "Resid")) +
xlab("Year") + ylab(NULL) +
ggtitle("Residuos de largo plazo") +
guides(colour=guide_legend(title=NULL))
macro.Spain$u.lp <- residuals(reg.lp)
View(macro.Spain)
macro.Spain$u.lp <- augment(reg.lp)$.resid
View(macro.Spain)
macro.Spain.plus <- left_join(macro.Spain, residuals(reg.lp), by = "quarter")
View(macro.Spain.plus)
View(macro.Spain)
View(macro.Spain.plus)
macro.Spain$u.lp <- augment(reg.lp)$.innov
View(macro.Spain)
View(macro.Spain.plus)
View(macro.Spain)
View(macro.Spain.plus)
reg.cp <-  macro.Spain %>%
model(TSLM(d(log(PIR)) ~ d(log(YER)) + d(log(QT)) + d(log(CPE)) + d(LTR) + d(UCAP) + lag(u.lp)))  %>%
report()
# Corto plazo
reg.cp <-  macro.Spain %>%
model(TSLM(difference(log(PIR)) ~ difference(log(YER)) + difference(log(QT)) + difference(log(CPE)) + difference(LTR) + d(UCAP) + lag(u.lp)))  %>%
report()
orto plazo
reg.cp <-  macro.Spain %>%
model(TSLM(difference(log(PIR),1) ~ difference(log(YER),1) + difference(log(QT),1) + difference(log(CPE),1) + difference(LTR,1) + difference(UCAP,1) + lag(u.lp)))  %>%
report()
rlang::last_error()
macro.Spain %>%
transmute(
`dl_PIR` = difference(log(PIR), 1),
`dl_YER` = difference(log(YER), 1),
`dl_QT` = difference(log(QT), 1),
`dl_CPE` = difference(log(CPE), 1),
`l_LTR` = difference(LTR,1),
`l_LTR` = difference(UCAP,1),
)
View(macro.Spain)
macro.Spain %>%
transmute(
`dl_PIR` = difference(log(PIR), 1),
`dl_YER` = difference(log(YER), 1),
`dl_QT` = difference(log(QT), 1),
`dl_CPE` = difference(log(CPE), 1),
`d_LTR` = difference(LTR,1),
`d_UCAP` = difference(UCAP,1),
)
reg.cp <-  macro.Spain %>%
model(TSLM(dl_PIR ~ dl_YER + dl_QT + dl_CPE + d_LTR + dl_UCAP + lag(u.lp)))  %>%
report()
# Corto plazo
macro.Spain %>%
transmute(
`dl_PIR` = difference(log(PIR), 1),
`dl_YER` = difference(log(YER), 1),
`dl_QT` = difference(log(QT), 1),
`dl_CPE` = difference(log(CPE), 1),
`d_LTR` = difference(LTR,1),
`d_UCAP` = difference(UCAP,1),
) %>%
reg.cp <-  macro.Spain %>%
model(TSLM(dl_PIR ~ dl_YER + dl_QT + dl_CPE + d_LTR + dl_UCAP + lag(u.lp)))  %>%
report()
# Corto plazo
macro.Spain %>%
transmute(
`dl_PIR` = difference(log(PIR), 1),
`dl_YER` = difference(log(YER), 1),
`dl_QT` = difference(log(QT), 1),
`dl_CPE` = difference(log(CPE), 1),
`d_LTR` = difference(LTR,1),
`d_UCAP` = difference(UCAP,1),
) %>%
model(TSLM(dl_PIR ~ dl_YER + dl_QT + dl_CPE + d_LTR + dl_UCAP + lag(u.lp)))  %>%
report()
Corto plazo
macro.Spain %>%
transmute(
`dl_PIR` = difference(log(PIR), 1),
`dl_YER` = difference(log(YER), 1),
`dl_QT` = difference(log(QT), 1),
`dl_CPE` = difference(log(CPE), 1),
`d_LTR` = difference(LTR,1),
`d_UCAP` = difference(UCAP,1),
) %>%
model(TSLM(dl_PIR ~ dl_YER + dl_QT + dl_CPE + d_LTR + d_UCAP + lag(u.lp)))  %>%
report()
# Corto plazo
macro.Spain %>%
transmute(
`dl_PIR` = difference(log(PIR), 1),
`dl_YER` = difference(log(YER), 1),
`dl_QT` = difference(log(QT), 1),
`dl_CPE` = difference(log(CPE), 1),
`d_LTR` = difference(LTR,1),
`d_UCAP` = difference(UCAP,1),
) %>%
model(TSLM(dl_PIR ~ dl_YER + dl_QT + d_LTR + d_UCAP + lag(u.lp)))  %>%
report()
macro.Spain %>%
mutate(dl_PIR = difference(log(PIR)),
dl_YER = difference(log(YER)),
dl_QT = difference(log(QT)),
dl_CPE = difference(log(CPE)),
d_LTR = difference(LTR),
d_UCAP = difference(UCAP) ) %>%
model(TSLM(dl_PIR ~ dl_YER + dl_QT + d_LTR + d_UCAP + lag(u.lp)))  %>%
report()
acro.Spain %>%
mutate(dl_PIR = difference(log(PIR)),
dl_YER = difference(log(YER)),
dl_QT = difference(log(QT)),
dl_CPE = difference(log(CPE)),
d_LTR = difference(LTR),
d_UCAP = difference(UCAP) ) %>%
model(TSLM(dl_PIR ~ dl_YER + dl_QT + d_LTR + d_UCAP + lag(u.lp)))  %>%
report()
View(macro.Spain)
AIREF.ESP.data <- readr::read_csv("AIREF_ESP.csv")
View(AIREF.ESP.data)
# Método tidyverse (tsibble)
library(fpp3)
macro.Spain <- AIREF.ESP.data %>%
mutate(quarter = yearquarter(obs)) %>%
select(-obs) %>%
as_tsibble(index = quarter)
macro.Spain
View(macro.Spain)
macro.Spain %>%
autoplot(PIR) +
labs(title = "Inversión en Bienes de Equipo", subtitle = "Índice de volumen") + xlab("Year")
acro.Spain %>%
autoplot(PIR) +
labs(title = "Inversión en Bienes de Equipo", subtitle = "[Índice de volumen]") + xlab("Year")
macro.Spain %>%
autoplot(PIR) +
labs(title = "Inversión en Bienes de Equipo", subtitle = "[Índice de volumen]") + xlab("Year")
# Largo plazo
reg.lp <-  macro.Spain %>%
model(TSLM(log(PIR) ~ log(YER) + log(QT) + log(CPE) + LTR + UCAP)) %>%
report()
augment(reg.lp)
reg.lp %>% gg_tsresiduals()
macro.Spain$u.lp <- augment(reg.lp)$.innov
macro.Spain %>%
mutate(dl_PIR = difference(log(PIR)),
dl_YER = difference(log(YER)),
dl_QT = difference(log(QT)),
dl_CPE = difference(log(CPE)),
d_LTR = difference(LTR),
d_UCAP = difference(UCAP) ) %>%
model(TSLM(dl_PIR ~ dl_YER + dl_QT + d_LTR + d_UCAP + lag(u.lp)))  %>%
report()
Método tradicional
library(dynlm)
# Largo plazo
summary(reg.lp <- dynlm(log(PIR) ~ log(YER) + log(QT) + log(CPE) + LTR + UCAP, data=macro.Spain))
macro.Spain$u.lp <- resid(reg.lp)
# Corto plazo
summary(reg.cp <- dynlm(d(log(PIR)) ~ d(log(YER)) + d(log(QT)) + d(LTR) + d(UCAP) + L(u.lp), data=macro.Spain))
View(AIREF.ESP.data)
# Método tradicional
AIREF.ESP.ts <- ts(AIREF.ESP.data[,2:34], start=c(1995,1), end=c(2017,4),frequency=4)
#
View(AIREF.ESP.ts)
ts.plot(AIREF.ESP.ts[,"PIR"] , xlab="Inversión en Bienes de Equipo", ylab="")
#
acro.Spain %>%
autoplot(PIR) +
labs(title = "Inversión en Bienes de Equipo", subtitle = "[Índice de volumen]") + xlab("Year")
macro.Spain %>%
autoplot(PIR) +
labs(title = "Inversión en Bienes de Equipo", subtitle = "[Índice de volumen]") + xlab("Year")
# Largo plazo
summary(reg.lp <- dynlm(log(PIR) ~ log(YER) + log(QT) + log(CPE) + LTR + UCAP, data=AIREF.ESP.ts))
u.lp <- resid(reg.lp)
plot(u.lp)
summary(reg.cp <- dynlm(d(log(PIR)) ~ d(log(YER)) + d(log(QT)) + d(LTR) + d(UCAP) + L(u.lp), data=AIREF.ESP.ts))
library("AER")
library("tseries")
library("ggplot2")
library("imputeTS")
library("fGarch")
EurUsd <- read.zoo("FIN_EURUSD.CSV", header = FALSE, sep = " ", format = "%Y-%m-%d")
plot(EurUsd)
class(EurUsd)
?read.zoo
EURUSD <- get.hist.quote("EURUSD=X", start = "2004-01-01", end = "2020-11-15")
plot(EURUSD)
autoplot(EURUSD$Close) + facet_free()
?na.approx
statsNA(EURUSD$Close)
EurUsd <-  na.approx(EURUSD$Close)
statsNA(EurUsd)
autoplot(cbind(EURUSD$Close, EurUsd)) + facet_free()
write.zoo(EurUsd, "FIN_EURUSD.CSV", index.name = "Index")
plot(EurUsd)
class(EurUsd)
plotNA.distribution(EurUsd)
plotNA.distributionBar(EurUsd, breaks = 20)
ggplot_na_distribution(EurUsd)
ggplot_na_distribution(EurUsd, breaks = 20)
?ggplot_na_distribution
?na.approx
plotNA.distributionBar(EurUsd, breaks = 20)
ggplot_na_intervals(EurUsd, breaks = 20)
ggplot_na_intervals(EurUsd)
autoplot(EURUSD$Close) + facet_free()
statsNA(EURUSD$Close)
ggplot_na_distribution(EURUSD$Close)
ggplot_na_intervals(EURUSD$Close)
EurUsd <-  na.approx(EURUSD$Close)
autoplot(cbind(EURUSD$Close, EurUsd)) + facet_free()
statsNA(EurUsd)
plot(EurUsd)
class(EurUsd)
dim(EurUsd)
autoplot(EurUsd) + facet_free()
tatsNA(EURUSD$Close)
statsNA(EurUsd)
rEurUsd <- 100 * diff(log(EurUsd))
statsNA(rEurUsd)
autoplot(rEurUsd) + facet_free()
plot(rEurUsd)
summary(rEurUsd)
EurUsd_GARCH <- garchFit(~ garch(1,1), data = rEurUsd, cond.dist = "norm", trace = FALSE)
summary(rEurUsd_GARCH)
plot(rEurUsd_GARCH)
rEurUsd_GARCH <- garchFit(~ garch(1,1), data = rEurUsd, cond.dist = "norm", trace = FALSE)
summary(rEurUsd_GARCH)
plot(rEurUsd_GARCH)
rEurUsd_ARMA_GARCH <- garchFit(~ arma(1,0) + garch(1,1), data = rEurUsd, trace = FALSE)
summary(rEurUsd_ARMA_GARCH)
#
rEurUsd_ARMA_APARCH <- garchFit(~ arma(1,0) + aparch(1,1), data = rEurUsd, trace = FALSE)
summary(rEurUsd_ARMA_APARCH)
#
install.packages("cowplot")
install.packages("tidyquant")
install.packages("timetk")
install.packages("modeltime")
install.packages("TSstudio")
# Load libraries
library(fpp2)         # An older forecasting framework
library(fpp3)         # A newer tidy forecasting framework
library(timetk)       # An even newer tidy forecasting framework
library(tidyverse)    # Collection of data manipulation tools
library(tidyquant)    # Business Science ggplot theme
library(cowplot)      # A ggplot add-on for arranging plots
# Quarterly Australian production data as tibble
aus <- tsibbledata::aus_production %>% as_tibble()
# Check structure
aus %>% str()
View(aus)
install.packages(c("BGVAR", "magrittr", "mice", "raster", "rbibutils", "RcppArmadillo", "rstan", "stochvol", "tm", "tune", "vctrs"))
