---
title: "R Notebook"
subtitle: "Modelo de egresión lineal simple (con sólo una variable explicativa)"
output:
  html_document:
    df_print: paged
---

# R code

```{r}
library(readxl)
SPhedge <- read_excel("~/Documents/R/R_Python_Ramajo/IE4F/SP500_HEDGE.xls", col_types = c("date", "numeric", "numeric"))
head(SPhedge)
summary(SPhedge[,2:3])
#
model_prices = lm(Spot ~ Futures,data = SPhedge)
summary(model_prices)
library(car)
linearHypothesis(model_prices,c("Futures=1"))
#
SPhedge$r_Spot = c(NA,100*diff(log(SPhedge$Spot)))
SPhedge$r_Futures = c(NA,100*diff(log(SPhedge$Futures))) 
summary(SPhedge[c("r_Spot","r_Futures")])
#
model_returns = lm(r_Spot ~ r_Futures,data = SPhedge)
summary(model_returns)
linearHypothesis(model_returns,c("r_Futures=1"))
```

# Python code

```{python}
import pandas as pd
import numpy as np
import statsmodels.formula.api as smf
#
data = pd.read_excel('/Users/JulianRamajo/Documents/R/R_Python_Ramajo/IE4F/SP500_HEDGE.xls', index_col=0)
data.head()
data.describe()
#
formula = 'Spot ~ Futures'
results = smf.ols(formula, data).fit()
print(results.summary())
hypotheses = 'Futures = 1'
F_test = results.f_test(hypotheses)
print(F_test)
# 
def LogDiff(x):
    x_diff = 100*np.log(x/x.shift(1))
    x_diff = x_diff.dropna()
    return x_diff
data = pd.DataFrame({'r_Spot':LogDiff(data['Spot']), 'r_Futures':LogDiff(data['Futures'])})
data.head()
data.describe()
#
formula = 'r_Spot ~ r_Futures'
results = smf.ols(formula, data).fit()
print(results.summary())
hypotheses = 'r_Futures = 1'
F_test = results.f_test(hypotheses)
print(F_test)
```
