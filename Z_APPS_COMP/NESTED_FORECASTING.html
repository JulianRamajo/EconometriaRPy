<!DOCTYPE html>
<html class="no-js" lang="en-US"
	prefix="og: https://ogp.me/ns#"  prefix="og: http://ogp.me/ns#">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introducing Iterative (Nested) Forecasting with Modeltime | R-bloggers</title>
<!-- This site is running CAOS for Wordpress -->

		<!-- All in One SEO 4.1.2.2 -->
		<meta name="description" content="Iteratively forecast with tidyverse nested modeling Why is nested forecasting important? For starters, the ability to iteratively forecast time series with many models that are trained on many individual groups has been a huge request from student..."/>
		<script src="/cdn-cgi/apps/head/pAx-dKbLyle7umPnDyx7D0pQbKA.js"></script><link rel="canonical" href="https://www.r-bloggers.com/2021/08/introducing-iterative-nested-forecasting-with-modeltime/" />
		<meta property="og:site_name" content="R-bloggers" />
		<meta property="og:type" content="article" />
		<meta property="og:title" content="Introducing Iterative (Nested) Forecasting with Modeltime | R-bloggers" />
		<meta property="og:description" content="Iteratively forecast with tidyverse nested modeling Why is nested forecasting important? For starters, the ability to iteratively forecast time series with many models that are trained on many individual groups has been a huge request from student..." />
		<meta property="og:url" content="https://www.r-bloggers.com/2021/08/introducing-iterative-nested-forecasting-with-modeltime/" />
		<meta property="fb:admins" content="rbloggers" />
		<meta property="og:image" content="https://www.business-science.io/assets/2021-08-26-modeltime-nested/modeltime-nested.jpg" />
		<meta property="og:image:secure_url" content="https://www.business-science.io/assets/2021-08-26-modeltime-nested/modeltime-nested.jpg" />
		<meta property="article:published_time" content="2021-08-26T02:01:01Z" />
		<meta property="article:modified_time" content="2021-08-26T06:01:01Z" />
		<meta property="article:publisher" content="https://www.facebook.com/rbloggers/" />
		<meta name="twitter:card" content="summary" />
		<meta name="twitter:site" content="@rbloggers" />
		<meta name="twitter:domain" content="www.r-bloggers.com" />
		<meta name="twitter:title" content="Introducing Iterative (Nested) Forecasting with Modeltime | R-bloggers" />
		<meta name="twitter:description" content="Iteratively forecast with tidyverse nested modeling Why is nested forecasting important? For starters, the ability to iteratively forecast time series with many models that are trained on many individual groups has been a huge request from student..." />
		<meta name="twitter:image" content="https://www.business-science.io/assets/2021-08-26-modeltime-nested/modeltime-nested.jpg" />
		<script type="application/ld+json" class="aioseo-schema">
			{"@context":"https:\/\/schema.org","@graph":[{"@type":"WebSite","@id":"https:\/\/www.r-bloggers.com\/#website","url":"https:\/\/www.r-bloggers.com\/","name":"R-bloggers","description":"R news and tutorials contributed by hundreds of R bloggers","publisher":{"@id":"https:\/\/www.r-bloggers.com\/#organization"}},{"@type":"Organization","@id":"https:\/\/www.r-bloggers.com\/#organization","name":"R-bloggers","url":"https:\/\/www.r-bloggers.com\/","logo":{"@type":"ImageObject","@id":"https:\/\/www.r-bloggers.com\/#organizationLogo","url":"https:\/\/www.r-bloggers.com\/wp-content\/uploads\/2020\/07\/R_02.webp"},"image":{"@id":"https:\/\/www.r-bloggers.com\/#organizationLogo"},"sameAs":["https:\/\/www.facebook.com\/rbloggers\/","https:\/\/twitter.com\/rbloggers"]},{"@type":"BreadcrumbList","@id":"https:\/\/www.r-bloggers.com\/2021\/08\/introducing-iterative-nested-forecasting-with-modeltime\/#breadcrumblist","itemListElement":[{"@type":"ListItem","@id":"https:\/\/www.r-bloggers.com\/#listItem","position":"1","item":{"@type":"WebPage","@id":"https:\/\/www.r-bloggers.com\/","name":"Home","description":"R news and tutorials contributed by hundreds of R bloggers","url":"https:\/\/www.r-bloggers.com\/"},"nextItem":"https:\/\/www.r-bloggers.com\/2021\/#listItem"},{"@type":"ListItem","@id":"https:\/\/www.r-bloggers.com\/2021\/#listItem","position":"2","item":{"@type":"WebPage","@id":"https:\/\/www.r-bloggers.com\/2021\/","name":"2021","url":"https:\/\/www.r-bloggers.com\/2021\/"},"nextItem":"https:\/\/www.r-bloggers.com\/2021\/08\/#listItem","previousItem":"https:\/\/www.r-bloggers.com\/#listItem"},{"@type":"ListItem","@id":"https:\/\/www.r-bloggers.com\/2021\/08\/#listItem","position":"3","item":{"@type":"WebPage","@id":"https:\/\/www.r-bloggers.com\/2021\/08\/","name":"August","url":"https:\/\/www.r-bloggers.com\/2021\/08\/"},"nextItem":"https:\/\/www.r-bloggers.com\/2021\/08\/introducing-iterative-nested-forecasting-with-modeltime\/#listItem","previousItem":"https:\/\/www.r-bloggers.com\/2021\/#listItem"},{"@type":"ListItem","@id":"https:\/\/www.r-bloggers.com\/2021\/08\/introducing-iterative-nested-forecasting-with-modeltime\/#listItem","position":"4","item":{"@type":"WebPage","@id":"https:\/\/www.r-bloggers.com\/2021\/08\/introducing-iterative-nested-forecasting-with-modeltime\/","name":"Introducing Iterative (Nested) Forecasting with Modeltime","description":"Iteratively forecast with tidyverse nested modeling Why is nested forecasting important? For starters, the ability to iteratively forecast time series with many models that are trained on many individual groups has been a huge request from student...","url":"https:\/\/www.r-bloggers.com\/2021\/08\/introducing-iterative-nested-forecasting-with-modeltime\/"},"previousItem":"https:\/\/www.r-bloggers.com\/2021\/08\/#listItem"}]},{"@type":"Person","@id":"https:\/\/www.r-bloggers.com\/author\/business-science\/#author","url":"https:\/\/www.r-bloggers.com\/author\/business-science\/","name":"Business Science"},{"@type":"WebPage","@id":"https:\/\/www.r-bloggers.com\/2021\/08\/introducing-iterative-nested-forecasting-with-modeltime\/#webpage","url":"https:\/\/www.r-bloggers.com\/2021\/08\/introducing-iterative-nested-forecasting-with-modeltime\/","name":"Introducing Iterative (Nested) Forecasting with Modeltime | R-bloggers","description":"Iteratively forecast with tidyverse nested modeling Why is nested forecasting important? For starters, the ability to iteratively forecast time series with many models that are trained on many individual groups has been a huge request from student...","inLanguage":"en-US","isPartOf":{"@id":"https:\/\/www.r-bloggers.com\/#website"},"breadcrumb":{"@id":"https:\/\/www.r-bloggers.com\/2021\/08\/introducing-iterative-nested-forecasting-with-modeltime\/#breadcrumblist"},"author":"https:\/\/www.r-bloggers.com\/2021\/08\/introducing-iterative-nested-forecasting-with-modeltime\/#author","creator":"https:\/\/www.r-bloggers.com\/2021\/08\/introducing-iterative-nested-forecasting-with-modeltime\/#author","datePublished":"2021-08-26T02:01:01-06:00","dateModified":"2021-08-26T06:01:01-06:00"},{"@type":"Article","@id":"https:\/\/www.r-bloggers.com\/2021\/08\/introducing-iterative-nested-forecasting-with-modeltime\/#article","name":"Introducing Iterative (Nested) Forecasting with Modeltime | R-bloggers","description":"Iteratively forecast with tidyverse nested modeling Why is nested forecasting important? For starters, the ability to iteratively forecast time series with many models that are trained on many individual groups has been a huge request from student...","headline":"Introducing Iterative (Nested) Forecasting with Modeltime","author":{"@id":"https:\/\/www.r-bloggers.com\/author\/business-science\/#author"},"publisher":{"@id":"https:\/\/www.r-bloggers.com\/#organization"},"datePublished":"2021-08-26T02:01:01-06:00","dateModified":"2021-08-26T06:01:01-06:00","articleSection":"R bloggers","mainEntityOfPage":{"@id":"https:\/\/www.r-bloggers.com\/2021\/08\/introducing-iterative-nested-forecasting-with-modeltime\/#webpage"},"isPartOf":{"@id":"https:\/\/www.r-bloggers.com\/2021\/08\/introducing-iterative-nested-forecasting-with-modeltime\/#webpage"},"image":{"@type":"ImageObject","@id":"https:\/\/www.r-bloggers.com\/#articleImage","url":"https:\/\/www.business-science.io\/assets\/2021-08-26-modeltime-nested\/modeltime-nested.jpg"}}]}
		</script>
		<!-- All in One SEO -->


<!-- Open Graph Meta Tags generated by MashShare 3.7.9 - https://mashshare.net -->
<meta property="og:type" content="article" /> 
<meta property="og:title" content="Introducing Iterative (Nested) Forecasting with Modeltime" />
<meta property="og:description" content="&lt;div style = &quot;width:60%; display: inline-block; float:left; &quot;&gt;    Iteratively forecast with tidyverse nested modeling   Why is nested forecasting important? For starters, the ability to iteratively forecast time series with many models that are trained on many individual groups has been a huge request from student...&lt;/div&gt;&lt;div style = &quot;width: 40%; display: inline-block; float:right;&quot;&gt;&lt;img src=' https://www.business-science.io/assets/2021-08-26-modeltime-nested/modeltime-nested.jpg' width = &quot;200&quot;  style = &quot;padding: 10px;&quot; /&gt;&lt;/div&gt;&lt;div style=&quot;clear: both;&quot;&gt;&lt;/div&gt;" />
<meta property="og:url" content="https://www.r-bloggers.com/2021/08/introducing-iterative-nested-forecasting-with-modeltime/" />
<meta property="og:site_name" content="R-bloggers" />
<meta property="article:publisher" content="https://www.facebook.com/rbloggers/" />
<meta property="article:published_time" content="2021-08-25T20:01:01-06:00" />
<meta property="article:modified_time" content="2021-08-26T00:01:01-06:00" />
<meta property="og:updated_time" content="2021-08-26T00:01:01-06:00" />
<!-- Open Graph Meta Tags generated by MashShare 3.7.9 - https://www.mashshare.net -->
<!-- Twitter Card generated by MashShare 3.7.9 - https://www.mashshare.net -->
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Introducing Iterative (Nested) Forecasting with Modeltime">
<meta name="twitter:description" content="&lt;div style = &quot;width:60%; display: inline-block; float:left; &quot;&gt;    Iteratively forecast with tidyverse nested modeling   Why is nested forecasting important? For starters, the ability to iteratively forecast time series with many models that are trained on many individual groups has been a huge request from student...&lt;/div&gt;&lt;div style = &quot;width: 40%; display: inline-block; float:right;&quot;&gt;&lt;img src=' https://www.business-science.io/assets/2021-08-26-modeltime-nested/modeltime-nested.jpg' width = &quot;200&quot;  style = &quot;padding: 10px;&quot; /&gt;&lt;/div&gt;&lt;div style=&quot;clear: both;&quot;&gt;&lt;/div&gt;">
<meta name="twitter:site" content="@Rbloggers">
<!-- Twitter Card generated by MashShare 3.7.9 - https://www.mashshare.net -->

<link rel='dns-prefetch' href='//s0.wp.com' />
<link rel='dns-prefetch' href='//fonts.googleapis.com' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel='preconnect' href='//www.google-analytics.com' />
		<script type="2b35157d11c2ea52143dce53-text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.0.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.0.0\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/www.r-bloggers.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.5.5"}};
			!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){var a=String.fromCharCode;p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,e),0,0);e=i.toDataURL();return p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,t),0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(!p||!p.fillText)return!1;switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])?!1:!s([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!s([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]);case"emoji":return!s([55357,56424,8205,55356,57212],[55357,56424,8203,55356,57212])}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(n=t.source||{}).concatemoji?c(n.concatemoji):n.wpemoji&&n.twemoji&&(c(n.twemoji),c(n.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel='stylesheet' id='snp_styles_reset-css'  href='https://www.r-bloggers.com/wp-content/plugins/arscode-ninja-popups/themes/reset.min.css?ver=5.5.5' type='text/css' media='all' />
<link rel='stylesheet' id='fancybox2-css'  href='https://www.r-bloggers.com/wp-content/plugins/arscode-ninja-popups/fancybox2/jquery.fancybox.min.css?ver=5.5.5' type='text/css' media='all' />
<link rel='stylesheet' id='snp_styles_theme6-css'  href='https://www.r-bloggers.com/wp-content/plugins/arscode-ninja-popups/themes/theme6/css/theme6.css?ver=5.5.5' type='text/css' media='all' />
<link rel='stylesheet' id='wp-block-library-css'  href='https://c0.wp.com/c/5.5.5/wp-includes/css/dist/block-library/style.min.css' type='text/css' media='all' />
<link rel='stylesheet' id='mashsb-styles-css'  href='https://www.r-bloggers.com/wp-content/plugins/mashsharer/assets/css/mashsb.min.css?ver=3.7.9' type='text/css' media='all' />
<style id='mashsb-styles-inline-css' type='text/css'>
.mashsb-count {color:#cccccc;}@media only screen and (min-width:568px){.mashsb-buttons a {min-width: 177px;}}
</style>
<link rel='stylesheet' id='wpt-twitter-feed-css'  href='https://www.r-bloggers.com/wp-content/plugins/wp-to-twitter/css/twitter-feed.css?ver=5.5.5' type='text/css' media='all' />
<style id="mh-google-fonts-css" media="all">/* cyrillic-ext */
@font-face {
  font-family: 'Open Sans';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: url(/fonts.gstatic.com/s/opensans/v23/mem6YaGs126MiZpBA-UFUK0Udc1GAK6bt6o.woff2) format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
/* cyrillic */
@font-face {
  font-family: 'Open Sans';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: url(/fonts.gstatic.com/s/opensans/v23/mem6YaGs126MiZpBA-UFUK0ddc1GAK6bt6o.woff2) format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
/* greek-ext */
@font-face {
  font-family: 'Open Sans';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: url(/fonts.gstatic.com/s/opensans/v23/mem6YaGs126MiZpBA-UFUK0Vdc1GAK6bt6o.woff2) format('woff2');
  unicode-range: U+1F00-1FFF;
}
/* greek */
@font-face {
  font-family: 'Open Sans';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: url(/fonts.gstatic.com/s/opensans/v23/mem6YaGs126MiZpBA-UFUK0adc1GAK6bt6o.woff2) format('woff2');
  unicode-range: U+0370-03FF;
}
/* vietnamese */
@font-face {
  font-family: 'Open Sans';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: url(/fonts.gstatic.com/s/opensans/v23/mem6YaGs126MiZpBA-UFUK0Wdc1GAK6bt6o.woff2) format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+1EA0-1EF9, U+20AB;
}
/* latin-ext */
@font-face {
  font-family: 'Open Sans';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: url(/fonts.gstatic.com/s/opensans/v23/mem6YaGs126MiZpBA-UFUK0Xdc1GAK6bt6o.woff2) format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
/* latin */
@font-face {
  font-family: 'Open Sans';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: url(/fonts.gstatic.com/s/opensans/v23/mem6YaGs126MiZpBA-UFUK0Zdc1GAK6b.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
/* cyrillic-ext */
@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 300;
  font-display: swap;
  src: url(/fonts.gstatic.com/s/opensans/v23/mem5YaGs126MiZpBA-UN_r8OX-hpKKSTj5PW.woff2) format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
/* cyrillic */
@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 300;
  font-display: swap;
  src: url(/fonts.gstatic.com/s/opensans/v23/mem5YaGs126MiZpBA-UN_r8OVuhpKKSTj5PW.woff2) format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
/* greek-ext */
@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 300;
  font-display: swap;
  src: url(/fonts.gstatic.com/s/opensans/v23/mem5YaGs126MiZpBA-UN_r8OXuhpKKSTj5PW.woff2) format('woff2');
  unicode-range: U+1F00-1FFF;
}
/* greek */
@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 300;
  font-display: swap;
  src: url(/fonts.gstatic.com/s/opensans/v23/mem5YaGs126MiZpBA-UN_r8OUehpKKSTj5PW.woff2) format('woff2');
  unicode-range: U+0370-03FF;
}
/* vietnamese */
@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 300;
  font-display: swap;
  src: url(/fonts.gstatic.com/s/opensans/v23/mem5YaGs126MiZpBA-UN_r8OXehpKKSTj5PW.woff2) format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+1EA0-1EF9, U+20AB;
}
/* latin-ext */
@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 300;
  font-display: swap;
  src: url(/fonts.gstatic.com/s/opensans/v23/mem5YaGs126MiZpBA-UN_r8OXOhpKKSTj5PW.woff2) format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
/* latin */
@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 300;
  font-display: swap;
  src: url(/fonts.gstatic.com/s/opensans/v23/mem5YaGs126MiZpBA-UN_r8OUuhpKKSTjw.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
/* cyrillic-ext */
@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url(/fonts.gstatic.com/s/opensans/v23/mem8YaGs126MiZpBA-UFWJ0bf8pkAp6a.woff2) format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
/* cyrillic */
@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url(/fonts.gstatic.com/s/opensans/v23/mem8YaGs126MiZpBA-UFUZ0bf8pkAp6a.woff2) format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
/* greek-ext */
@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url(/fonts.gstatic.com/s/opensans/v23/mem8YaGs126MiZpBA-UFWZ0bf8pkAp6a.woff2) format('woff2');
  unicode-range: U+1F00-1FFF;
}
/* greek */
@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url(/fonts.gstatic.com/s/opensans/v23/mem8YaGs126MiZpBA-UFVp0bf8pkAp6a.woff2) format('woff2');
  unicode-range: U+0370-03FF;
}
/* vietnamese */
@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url(/fonts.gstatic.com/s/opensans/v23/mem8YaGs126MiZpBA-UFWp0bf8pkAp6a.woff2) format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+1EA0-1EF9, U+20AB;
}
/* latin-ext */
@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url(/fonts.gstatic.com/s/opensans/v23/mem8YaGs126MiZpBA-UFW50bf8pkAp6a.woff2) format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
/* latin */
@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url(/fonts.gstatic.com/s/opensans/v23/mem8YaGs126MiZpBA-UFVZ0bf8pkAg.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
/* cyrillic-ext */
@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: url(/fonts.gstatic.com/s/opensans/v23/mem5YaGs126MiZpBA-UNirkOX-hpKKSTj5PW.woff2) format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
/* cyrillic */
@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: url(/fonts.gstatic.com/s/opensans/v23/mem5YaGs126MiZpBA-UNirkOVuhpKKSTj5PW.woff2) format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
/* greek-ext */
@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: url(/fonts.gstatic.com/s/opensans/v23/mem5YaGs126MiZpBA-UNirkOXuhpKKSTj5PW.woff2) format('woff2');
  unicode-range: U+1F00-1FFF;
}
/* greek */
@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: url(/fonts.gstatic.com/s/opensans/v23/mem5YaGs126MiZpBA-UNirkOUehpKKSTj5PW.woff2) format('woff2');
  unicode-range: U+0370-03FF;
}
/* vietnamese */
@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: url(/fonts.gstatic.com/s/opensans/v23/mem5YaGs126MiZpBA-UNirkOXehpKKSTj5PW.woff2) format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+1EA0-1EF9, U+20AB;
}
/* latin-ext */
@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: url(/fonts.gstatic.com/s/opensans/v23/mem5YaGs126MiZpBA-UNirkOXOhpKKSTj5PW.woff2) format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
/* latin */
@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: url(/fonts.gstatic.com/s/opensans/v23/mem5YaGs126MiZpBA-UNirkOUuhpKKSTjw.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
/* cyrillic-ext */
@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: url(/fonts.gstatic.com/s/opensans/v23/mem5YaGs126MiZpBA-UN7rgOX-hpKKSTj5PW.woff2) format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
/* cyrillic */
@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: url(/fonts.gstatic.com/s/opensans/v23/mem5YaGs126MiZpBA-UN7rgOVuhpKKSTj5PW.woff2) format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
/* greek-ext */
@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: url(/fonts.gstatic.com/s/opensans/v23/mem5YaGs126MiZpBA-UN7rgOXuhpKKSTj5PW.woff2) format('woff2');
  unicode-range: U+1F00-1FFF;
}
/* greek */
@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: url(/fonts.gstatic.com/s/opensans/v23/mem5YaGs126MiZpBA-UN7rgOUehpKKSTj5PW.woff2) format('woff2');
  unicode-range: U+0370-03FF;
}
/* vietnamese */
@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: url(/fonts.gstatic.com/s/opensans/v23/mem5YaGs126MiZpBA-UN7rgOXehpKKSTj5PW.woff2) format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+1EA0-1EF9, U+20AB;
}
/* latin-ext */
@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: url(/fonts.gstatic.com/s/opensans/v23/mem5YaGs126MiZpBA-UN7rgOXOhpKKSTj5PW.woff2) format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
/* latin */
@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: url(/fonts.gstatic.com/s/opensans/v23/mem5YaGs126MiZpBA-UN7rgOUuhpKKSTjw.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
</style>
<link rel='stylesheet' id='mh-style-css'  href='https://www.r-bloggers.com/wp-content/themes/mh-corporate-basic/style.css?ver=5.5.5' type='text/css' media='all' />
<link rel='stylesheet' id='jetpack_css-css'  href='https://c0.wp.com/p/jetpack/7.3.3/css/jetpack.css' type='text/css' media='all' />
<script type="2b35157d11c2ea52143dce53-text/javascript" src='https://c0.wp.com/c/5.5.5/wp-includes/js/jquery/jquery.js' id='jquery-core-js'></script>
<script type="2b35157d11c2ea52143dce53-text/javascript" id='jetpack_related-posts-js-extra'>
/* <![CDATA[ */
var related_posts_js_options = {"post_heading":"h4"};
/* ]]> */
</script>
<script type="2b35157d11c2ea52143dce53-text/javascript" src='https://c0.wp.com/p/jetpack/7.3.3/_inc/build/related-posts/related-posts.min.js' id='jetpack_related-posts-js'></script>
<script type="2b35157d11c2ea52143dce53-text/javascript" id='mashsb-js-extra'>
/* <![CDATA[ */
var mashsb = {"shares":"0","round_shares":"1","animate_shares":"0","dynamic_buttons":"0","share_url":"https:\/\/www.r-bloggers.com\/2021\/08\/introducing-iterative-nested-forecasting-with-modeltime\/","title":"Introducing+Iterative+%28Nested%29+Forecasting+with+Modeltime","image":null,"desc":"<div style = \"width:60%; display: inline-block; float:left; \"> \n  Iteratively forecast with tidyverse nested modeling\n\n\nWhy is nested forecasting important? For starters, the ability to iteratively forecast time series with many models that are trained on many individual groups has been a huge request from student...<\/div><div style = \"width: 40%; display: inline-block; float:right;\"><img src=' https:\/\/www.business-science.io\/assets\/2021-08-26-modeltime-nested\/modeltime-nested.jpg' width = \"200\"  style = \"padding: 10px;\" \/><\/div><div style=\"clear: both;\"><\/div>","hashtag":"Rbloggers","subscribe":"link","subscribe_url":"https:\/\/feedburner.google.com\/fb\/a\/mailverify?uri=RBloggers","activestatus":"1","singular":"1","twitter_popup":"1","refresh":"0","nonce":"cfca6b582a","postid":"226663","servertime":"1630005114","ajaxurl":"https:\/\/www.r-bloggers.com\/wp-admin\/admin-ajax.php"};
/* ]]> */
</script>
<script type="2b35157d11c2ea52143dce53-text/javascript" src='https://www.r-bloggers.com/wp-content/plugins/mashsharer/assets/js/mashsb.min.js?ver=3.7.9' id='mashsb-js'></script>
<script type="2b35157d11c2ea52143dce53-text/javascript" src='https://www.r-bloggers.com/wp-content/themes/mh-corporate-basic/js/scripts.js?ver=5.5.5' id='mh-scripts-js'></script>
<script type="2b35157d11c2ea52143dce53-text/javascript" src='https://www.r-bloggers.com/wp-content/uploads/caos/analytics.js' id='caos-analytics-js'></script>
<script type="2b35157d11c2ea52143dce53-text/javascript" id='caos-analytics-js-after'>
    


    window.ga = window.ga || function() {
        (ga.q = ga.q || []).push(arguments);
    };
    ga.l = +new Date;

        ga('create', 'UA-419807-53', {"cookieName":"caosLocalGa","cookieDomain":"www.r-bloggers.com","cookieExpires":2592000,"cookieFlags":"samesite=none;secure","siteSpeedSampleRate":"1"});
        ga('set', 'anonymizeIp', true);    ga('send', 'pageview');
                

    function _caosLt(event) {
        if (typeof gtag !== 'function' && typeof ga !== 'function') {
            return;
        }

        /* Only run on left clicks. */
        if (event.which !== 1) {
            return;
        }

        var eventLink = event.srcElement || event.target;

        /* Loop up the DOM tree through parent elements if clicked element is not a link (eg: an image inside a link) */
        while (eventLink && (typeof eventLink.tagName == 'undefined' || eventLink.tagName.toLowerCase() !== 'a' || !eventLink.href)) {
            eventLink = eventLink.parentNode;
        }

        /* if a link with valid href has been clicked */
        if (eventLink && eventLink.href) {
            var link = eventLink.href;
            /* Only if it is an external link */
            if (link.indexOf(location.host) === -1 && !link.match(/^javascript\:/i)) {
                /* Is actual target set and not _(self|parent|top)? */
                var target = (eventLink.target && !eventLink.target.match(/^_(self|parent|top)$/i)) ? eventLink.target : false;
                /* Assume a target if Ctrl|shift|meta-click */
                if (event.ctrlKey || event.shiftKey || event.metaKey || event.which === 2) {
                    target = '_blank';
                }

                var hbrun = false; // tracker has not yet run

                /* HitCallback to open link in same window after tracker */
                var hitBack = function() {
                    /* run once only */
                    if (hbrun) return;
                    hbrun = true;
                    window.location.href = link;
                };

                if (target) {
                    /* If target opens a new window then just track */
                                            ga('send', 'event', 'Outbound Link Tracking', 'click', link);
                                    } else {
                    /* Prevent standard click, track then open */
                    event.preventDefault ? event.preventDefault() : event.returnValue != 1;
                    /* send event with callback */
                                            ga('send', 'event', 'Outbound Link Tracking', 'click', link, {
                            'transport': 'beacon',
                            'hitCallback': hitBack
                        });
                                        /* Run hitCallback again if GA takes longer than 1 second */
                    setTimeout(hitBack, 1000);
                }
            }
        }
    }

    var _window = window;

    /* Use "click" if touchscreen device, else "mousedown" */
    var _caosLtEvent = ('ontouchstart' in _window) ? 'click' : 'mousedown';

    /* Attach the event to all clicks in the document after page has loaded */
    _window.addEventListener ? _window.addEventListener('load', function() {
        document.body.addEventListener(_caosLtEvent, _caosLt, !1);
    }, !1) : _window.attachEvent && _window.attachEvent('onload', function() {
        document.body.attachEvent('on' + _caosLtEvent, _caosLt);
    });
</script>
<link rel="https://api.w.org/" href="https://www.r-bloggers.com/wp-json/" /><link rel="alternate" type="application/json" href="https://www.r-bloggers.com/wp-json/wp/v2/posts/226663" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://www.r-bloggers.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://www.r-bloggers.com/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='A lightweight data validation ecosystem with R, GitHub, and Slack' href='https://www.r-bloggers.com/2021/08/a-lightweight-data-validation-ecosystem-with-r-github-and-slack/' />
<link rel='next' title='EARL Online 2021: Dr Branka Subotić, keynote speaker' href='https://www.r-bloggers.com/2021/08/earl-online-2021-dr-branka-subotic-keynote-speaker/' />
<meta name="generator" content="WordPress 5.5.5" />
<link rel='shortlink' href='https://www.r-bloggers.com/?p=226663' />
<link rel="alternate" type="application/json+oembed" href="https://www.r-bloggers.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.r-bloggers.com%2F2021%2F08%2Fintroducing-iterative-nested-forecasting-with-modeltime%2F" />
<link rel="alternate" type="text/xml+oembed" href="https://www.r-bloggers.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.r-bloggers.com%2F2021%2F08%2Fintroducing-iterative-nested-forecasting-with-modeltime%2F&#038;format=xml" />
<meta property="og:title" content="Introducing Iterative (Nested) Forecasting with Modeltime" /><meta property="og:description" content="
  Iteratively forecast with tidyverse nested modeling


Why is nested forecasting important? For starters, the ability to iteratively forecast time series with many models that are trained on many individual groups has been a huge request from student..." /><meta property="og:image" content="https://www.business-science.io/assets/2021-08-26-modeltime-nested/modeltime-nested.jpg" />
<link rel='dns-prefetch' href='//i0.wp.com'/>
<link rel='dns-prefetch' href='//i1.wp.com'/>
<link rel='dns-prefetch' href='//i2.wp.com'/>
<link rel='dns-prefetch' href='//c0.wp.com'/>
<style type='text/css'>img#wpstats{display:none}</style><!--[if lt IE 9]>
<script src="https://www.r-bloggers.com/wp-content/themes/mh-corporate-basic/js/css3-mediaqueries.js"></script>
<![endif]-->
<link rel="amphtml" href="https://www.r-bloggers.com/2021/08/introducing-iterative-nested-forecasting-with-modeltime/amp/">			<style type="text/css">
				/* If html does not have either class, do not show lazy loaded images. */
				html:not( .jetpack-lazy-images-js-enabled ):not( .js ) .jetpack-lazy-image {
					display: none;
				}
			</style>
			<script type="2b35157d11c2ea52143dce53-text/javascript">
				document.documentElement.classList.add(
					'jetpack-lazy-images-js-enabled'
				);
			</script>
		
<!-- WordPress Facebook Open Graph protocol plugin (WPFBOGP v2.0.13) http://rynoweb.com/wordpress-plugins/ -->
<meta property="fb:app_id" content="143207055763488"/>
<meta property="og:image" content="https://www.r-bloggers.com/wp-content/uploads/2016/08/R_single_01-200-1.png"/>
<meta property="og:image" content="https://www.filepicker.io/api/file/jay1WUozSWCVHfFBEil3"/>
<meta property="og:image" content="https://www.business-science.io/assets/2020-06-17-acf/time_series_course.jpg"/>
<meta property="og:image" content="https://www.business-science.io/assets/2020-06-05-timetk/time_series_course.jpg"/>
<meta property="og:image" content="https://www.business-science.io/figure/source/2021-08-26-modeltime-iterative-forecasting/unnamed-chunk-18-1.png"/>
<meta property="og:image" content="https://www.business-science.io/figure/source/2021-08-26-modeltime-iterative-forecasting/unnamed-chunk-15-1.png"/>
<meta property="og:image" content="https://www.business-science.io/figure/source/2021-08-26-modeltime-iterative-forecasting/unnamed-chunk-11-1.png"/>
<meta property="og:image" content="https://www.business-science.io/assets/2021-08-26-modeltime-nested/nested-core-functions.jpg"/>
<meta property="og:image" content="https://www.business-science.io/assets/2021-08-26-modeltime-nested/modeltime_nested_fit.jpg"/>
<meta property="og:image" content="https://www.business-science.io/figure/source/2021-08-26-modeltime-iterative-forecasting/unnamed-chunk-5-1.png"/>
<meta property="og:image" content="https://www.business-science.io/assets/2021-08-26-modeltime-nested/nested-logs.jpg"/>
<meta property="og:image" content="https://www.business-science.io/assets/2021-08-26-modeltime-nested/modeltime-nested.jpg"/>
<meta property="og:image" content="https://www.business-science.io/assets/2021-03-15-modeltime-h2o/modeltime_ecosystem.jpg"/>
<meta property="og:image" content="https://www.business-science.io/assets/2021-08-26-modeltime-nested/modeltime-nested.jpg"/>
<!-- // end wpfbogp -->
<link rel="icon" href="https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2016/08/cropped-R_single_01-200.png?fit=32%2C32&#038;ssl=1" sizes="32x32" />
<link rel="icon" href="https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2016/08/cropped-R_single_01-200.png?fit=192%2C192&#038;ssl=1" sizes="192x192" />
<link rel="apple-touch-icon" href="https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2016/08/cropped-R_single_01-200.png?fit=180%2C180&#038;ssl=1" />
<meta name="msapplication-TileImage" content="https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2016/08/cropped-R_single_01-200.png?fit=270%2C270&#038;ssl=1" />
<link rel="preload" href="/wp-includes/js/wp-emoji-release.min.js?ver=5.5.5" as="script"><link rel="preload" href="/wp-content/plugins/mashsharer/assets/js/mashsb.min.js?ver=3.7.9" as="script"><link rel="preload" href="/wp-content/themes/mh-corporate-basic/js/scripts.js?ver=5.5.5" as="script"><link rel="preload" href="/wp-content/uploads/caos/analytics.js" as="script"><link rel="preload" href="/wp-content/plugins/arscode-ninja-popups/themes/reset.min.css?ver=5.5.5" as="style"><link rel="preload" href="/wp-content/plugins/arscode-ninja-popups/fancybox2/jquery.fancybox.min.css?ver=5.5.5" as="style"><link rel="preload" href="/wp-content/plugins/arscode-ninja-popups/themes/theme6/css/theme6.css?ver=5.5.5" as="style"><link rel="preload" href="/wp-content/plugins/mashsharer/assets/css/mashsb.min.css?ver=3.7.9" as="style"><link rel="preload" href="/wp-content/plugins/wp-to-twitter/css/twitter-feed.css?ver=5.5.5" as="style"><link rel="preload" href="/wp-content/themes/mh-corporate-basic/style.css?ver=5.5.5" as="style">		<style type="text/css" id="wp-custom-css">
			hr {
    margin-top: 2px;
    margin-bottom: 2px;
}


pre, code {
  overflow: auto;
  white-space: pre;
	    font-family: "Source Code Pro","Liberation Mono","Courier New",Courier,monospace;
    font-size: 12px;
    line-height: 1.35em;
    overflow: hidden;
    /*white-space: pre-wrap;*/
    word-wrap: break-word;
    margin: 0 0 20px 0;
    padding: 0;
    position: relative;
    text-align: left;
    direction: ltr;
	  overflow-x: auto;
	  padding-left: 17px;
}

table {
  display: block;
  overflow-x: auto;
  white-space: nowrap;
}

/*deal with mathjax overflow*/
.MathJax_Display {
    overflow-x: auto;
    overflow-y: hidden; /* need to verify this works well*/
    display: block;
}		</style>
		</head>
<body class="post-template-default single single-post postid-226663 single-format-standard">
<div class="mh-container">
<div class="wrapper-corporate">
<header class="header-wrap">
	<a href="https://www.r-bloggers.com/" title="R-bloggers" rel="home">
<div class="logo-wrap" role="banner">
<img src="https://www.r-bloggers.com/wp-content/uploads/2020/07/R_02.webp" height="90" width="290" alt="R-bloggers" />
<div class="logo logo-overlay">
<h1 class="logo-name">R-bloggers</h1>
<h2 class="logo-desc">R news and tutorials contributed by hundreds of R bloggers</h2>
</div>
</div>
</a>
	<nav class="main-nav clearfix">
		<div class="menu-top-nav-container"><ul id="menu-top-nav" class="menu"><li id="menu-item-48314" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-48314"><a href="https://www.r-bloggers.com">Home</a></li>
<li id="menu-item-92333" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-92333"><a href="https://www.r-bloggers.com/about/">About</a></li>
<li id="menu-item-50111" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-50111"><a href="https://feeds.feedburner.com/RBloggers">RSS</a></li>
<li id="menu-item-48313" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-48313"><a href="https://www.r-bloggers.com/add-your-blog/">add your blog!</a></li>
<li id="menu-item-111419" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-111419"><a href="https://www.r-bloggers.com/how-to-learn-r-2/">Learn R</a></li>
<li id="menu-item-75513" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-75513"><a href="https://www.r-users.com/">R jobs</a>
<ul class="sub-menu">
	<li id="menu-item-76945" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-76945"><a href="https://www.r-users.com/submit-job/">Submit a new job (it&#8217;s free)</a></li>
	<li id="menu-item-76946" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-76946"><a href="https://www.r-users.com/">Browse latest jobs (also free)</a></li>
</ul>
</li>
<li id="menu-item-48311" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-48311"><a href="https://www.r-bloggers.com/contact-us/">Contact us</a></li>
</ul></div>	</nav>
</header>
<div class="mh-wrapper clearfix">
	<div class="mh-content left"><article class="post-226663 post type-post status-publish format-standard hentry category-r-bloggers">
	<header class="post-header">
		<h1 class="entry-title">Introducing Iterative (Nested) Forecasting with Modeltime</h1>
		<p class="meta post-meta">Posted on <span class="updated">August 25, 2021</span>  by <span class="vcard author"><a class="fn" href="https://www.r-bloggers.com/author/business-science/">Business Science</a></span>  in <a href="https://www.r-bloggers.com/category/r-bloggers/" rel="category tag">R bloggers</a> | 0 Comments</p>
	</header>
	<div class="entry clearfix">
				<p class="syndicated-attribution"><!-- 
<div style="min-height: 30px;">
[social4i size="small" align="align-left"]
</div>
-->

<div style="border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 12px;">
[This article was first published on  <strong><a href="https://www.business-science.io/code-tools/2021/08/26/modeltime-iterative-forecasting.html"> business-science.io</a></strong>, and kindly contributed to <a href="https://www.r-bloggers.com/" rel="nofollow">R-bloggers</a>].  (You can report issue about the content on this page <a href="https://www.r-bloggers.com/contact-us/">here</a>)
<hr>Want to share your content on R-bloggers?<a href="https://www.r-bloggers.com/add-your-blog/" rel="nofollow"> click here</a> if you have a blog, or <a href="https://r-posts.com/" rel="nofollow"> here</a> if you don't.
</div></p>
<aside class="mashsb-container mashsb-main mashsb-stretched"><div class="mashsb-box"><div class="mashsb-buttons"><a class="mashicon-facebook mash-large mash-center mashsb-noshadow" href="https://www.facebook.com/sharer.php?u=https%3A%2F%2Fwww.r-bloggers.com%2F2021%2F08%2Fintroducing-iterative-nested-forecasting-with-modeltime%2F" target="_blank" rel="nofollow"><span class="icon"></span><span class="text">Share</span></a><a class="mashicon-twitter mash-large mash-center mashsb-noshadow" href="https://twitter.com/intent/tweet?text=Introducing%20Iterative%20%28Nested%29%20Forecasting%20with%20Modeltime&url=https://www.r-bloggers.com/2021/08/introducing-iterative-nested-forecasting-with-modeltime/&via=Rbloggers" target="_blank" rel="nofollow"><span class="icon"></span><span class="text">Tweet</span></a><div class="onoffswitch2 mash-large mashsb-noshadow" style="display:none;"></div></div>
            </div>
                <div style="clear:both;"></div></aside>
            <!-- Share buttons by mashshare.net - Version: 3.7.9--><blockquote>
  <p>Iteratively forecast with <strong>tidyverse nested modeling</strong></p>
</blockquote>

<p><strong>Why is nested forecasting important?</strong> For starters, the ability to <em>iteratively forecast</em> time series with many models that are trained on many individual groups has been a huge request from students in our <a href="https://university.business-science.io/p/ds4b-203-r-high-performance-time-series-forecasting/" rel="nofollow" target="_blank">Time Series Course</a>.</p>

<div class="pull-right" style="width:40%; margin-left:20px; margin-bottom:20px;">
  <a href="https://www.business-science.io/code-tools/2021/08/26/modeltime-iterative-forecasting.html#" rel="nofollow" target="_blank">
  <img class="img-responsive jetpack-lazy-image" style="border:none !important;" src="https://i0.wp.com/www.business-science.io/assets/2021-08-26-modeltime-nested/modeltime-nested.jpg?w=578&#038;ssl=1" data-recalc-dims="1" data-lazy-src="https://i0.wp.com/www.business-science.io/assets/2021-08-26-modeltime-nested/modeltime-nested.jpg?w=578&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"><noscript><img class="img-responsive" style="border:none !important;" src="https://i0.wp.com/www.business-science.io/assets/2021-08-26-modeltime-nested/modeltime-nested.jpg?w=578&#038;ssl=1" data-recalc-dims="1" /></noscript>
  </a>
</div>

<p>Two methods exist for forecasting many time series that get results:</p>

<ol>
  <li>
    <p><strong>Global Modeling:</strong> Best for scalability using a Global Models and Panel Data structure. See <a href="https://business-science.github.io/modeltime/articles/modeling-panel-data.html" rel="nofollow" target="_blank">Forecasting with Global Models</a>.</p>
  </li>
  <li>
    <p><strong>Iterative Forecasting:</strong> Best for accuracy using a Nested Data Structure. Takes longer than global model (more resources due to for-loop iteration), but can yield great results. (Discussed Here)</p>
  </li>
</ol>

<p>We’ve incorporated a new approach called <strong><em>“Nested Forecasting”</em></strong> to help perform <em>Iterative Forecasting</em>. In this tutorial, we’ll forecast iteratively using<code>prophet</code> and <code>XGBoost</code> models.</p>

<!-- CTA -->
<p>Before we move on, what if I want to <strong>learn more</strong> in-depth forecasting training with Modeltime? 👇</p>

<h1 id="free-forecasting-training">Free Forecasting Training!</h1>

<p>I can’t possibly go over all of the <strong>NEW <code>modeltime</code> Nested Forecasting features</strong> in this tutorial. If you would like to learn more about <strong>Nested Forecasting</strong>, I’m hosting a <a href="https://bit.ly/nested-forecasting" rel="nofollow" target="_blank"><strong>FREE live webinar</strong></a> on on Thursday, September 9th at 2PM EST. I’ll cover:</p>

<ul>
  <li><strong>Nested Forecasting</strong> using a Real-World Example</li>
  <li><strong>NEW High-Performance Algorithms</strong> (thief, smooth) designed for Nested Forecasting</li>
  <li><strong>NEW Parallel Processing</strong> to speed up Nested Forecasting</li>
  <li>And, a lot of </li>
</ul>

<p style="font-size:36px;text-align:center;">
<a href="https://bit.ly/nested-forecasting" rel="nofollow" target="_blank">👉 Register Here.</a>
</p>
<!-- END CTA -->

<h1 id="before-we-get-started-install-modeltime">Before we get started, install <code>modeltime</code></h1>

<p><strong>The new nested forecasting</strong> is only available in the development version of <code>modeltime</code>. We will be releasing to CRAN soon.</p>

<p>For now, you can install with:</p>

<figure class="highlight"><pre>remotes::install_github(&quot;business-science/modeltime&quot;, dependencies = TRUE)</pre></figure>

<h1 id="what-is-modeltime-a-growing-ecosystem-for-tidymodels-forecasting">What is Modeltime? <br /><small>A <strong>growing</strong> ecosystem for tidymodels forecasting</small></h1>

<div class="pull-right" style="width:60%; margin-left:20px; margin-bottom:20px;">
  <a href="https://www.business-science.io/code-tools/2021/08/26/modeltime-iterative-forecasting.html#" rel="nofollow" target="_blank">
  <img class="img-responsive jetpack-lazy-image" style="border:none !important;" src="https://i1.wp.com/www.business-science.io/assets/2021-03-15-modeltime-h2o/modeltime_ecosystem.jpg?w=578&#038;ssl=1" data-recalc-dims="1" data-lazy-src="https://i1.wp.com/www.business-science.io/assets/2021-03-15-modeltime-h2o/modeltime_ecosystem.jpg?w=578&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"><noscript><img class="img-responsive" style="border:none !important;" src="https://i1.wp.com/www.business-science.io/assets/2021-03-15-modeltime-h2o/modeltime_ecosystem.jpg?w=578&#038;ssl=1" data-recalc-dims="1" /></noscript>
  </a>
</div>

<p>Modeltime is part of a <strong>growing ecosystem</strong> of forecasting packages. Modeltime integrates <code>tidymodels</code> for forecasting at scale. The ecosystem contains:</p>

<ul>
  <li>
    <p><a href="https://business-science.github.io/modeltime/" rel="nofollow" target="_blank">Modeltime (Machine Learning, Forecasting Workflow)</a></p>
  </li>
  <li>
    <p><a href="https://business-science.github.io/modeltime.h2o/" rel="nofollow" target="_blank">Modeltime H2O (AutoML)</a></p>
  </li>
  <li>
    <p><a href="https://business-science.github.io/modeltime.gluonts/" rel="nofollow" target="_blank">Modeltime GluonTS (Deep Learning)</a></p>
  </li>
  <li>
    <p><a href="https://business-science.github.io/modeltime.ensemble/" rel="nofollow" target="_blank">Modeltime Ensemble (Blending Forecasts)</a></p>
  </li>
  <li>
    <p><a href="https://business-science.github.io/modeltime.resample/" rel="nofollow" target="_blank">Modeltime Resample (Backtesting)</a></p>
  </li>
  <li>
    <p><a href="https://business-science.github.io/timetk/" rel="nofollow" target="_blank">Timetk (Data Transformation, Feature Engineering, Time Series Visualization)</a></p>
  </li>
</ul>

<p>And several new community-contributed <code>modeltime</code> extension packages have emerged including: <a href="https://github.com/AlbertoAlmuinha/boostime" rel="nofollow" target="_blank">boostime</a>, <a href="https://albertoalmuinha.github.io/bayesmodels/" rel="nofollow" target="_blank">bayesmodels</a>, <a href="https://albertoalmuinha.github.io/garchmodels/" rel="nofollow" target="_blank">garchmodels</a>, and <a href="https://rafzamb.github.io/sknifedatar/" rel="nofollow" target="_blank">sknifedatar</a></p>

<h1 id="what-is-nested-forecasting">What is Nested Forecasting?</h1>

<p><strong>Nested forecasting is a new feature</strong> in <code>modeltime</code>. The core idea of nested forecasting is to convert a dataset containing <strong>many time series groups</strong> into a nested data set, then fit <strong>many models</strong> to each of the nested data sets. The result is an iterative forecasting process that generates Nested Modeltime Tables with all of the forecast attributes needed to make decisions.</p>

<p><img src="https://i0.wp.com/www.business-science.io/assets/2021-08-26-modeltime-nested/modeltime-nested.jpg?w=578&#038;ssl=1" alt="Nested Forecasting" data-recalc-dims="1" data-lazy-src="https://i0.wp.com/www.business-science.io/assets/2021-08-26-modeltime-nested/modeltime-nested.jpg?w=578&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image"><noscript><img src="https://i0.wp.com/www.business-science.io/assets/2021-08-26-modeltime-nested/modeltime-nested.jpg?w=578&#038;ssl=1" alt="Nested Forecasting" data-recalc-dims="1" /></noscript></p>

<h2 id="important-concepts-logging--attributes">Important Concepts: Logging &#038; Attributes</h2>

<p>A new feature to nested forecasting workflow is <strong>logged attributes</strong>, which is very useful in complex workflows where loops (iteration) is performed. In a <em>Nested Modeltime Table</em>, we push as many operations as possible into the fitting and refitting stages, logging important aspects including:</p>

<ul>
  <li><strong>Test Accuracy:</strong> <code>extract_nested_test_accuracy()</code></li>
  <li><strong>Test Forecast:</strong> <code>extract_nested_test_forecast()</code></li>
  <li><strong>Error Reports:</strong> <code>extract_nested_error_report()</code></li>
  <li><strong>Best Models:</strong> <code>extract_nested_best_model_report()</code></li>
  <li><strong>Future Forecasts:</strong> <code>extract_nested_future_forecast()</code></li>
</ul>

<p>While this deviates from the traditional Modeltime Workflow, we find that <strong>logging vastly speeds up experimentation and information retrieval</strong> especially when the number of time series increases.</p>

<p><img src="https://i2.wp.com/www.business-science.io/assets/2021-08-26-modeltime-nested/nested-logs.jpg?w=578&#038;ssl=1" alt="Logging Attributes" data-recalc-dims="1" data-lazy-src="https://i2.wp.com/www.business-science.io/assets/2021-08-26-modeltime-nested/nested-logs.jpg?w=578&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image"><noscript><img src="https://i2.wp.com/www.business-science.io/assets/2021-08-26-modeltime-nested/nested-logs.jpg?w=578&#038;ssl=1" alt="Logging Attributes" data-recalc-dims="1" /></noscript></p>

<h2 id="getting-started">Getting Started</h2>

<p>We’ll go through a short tutorial on <strong>Nested Forecasting.</strong> The first thing to do is to load the following libraries:</p>

<figure class="highlight"><pre>library(tidymodels)
library(modeltime)
library(tidyverse)
library(timetk)</pre></figure>

<h3 id="dataset">Dataset</h3>

<p>Next, let’s use the <code>walmart_sales_weekly</code> dataset that comes with <code>timetk</code>.</p>

<figure class="highlight"><pre>data_tbl &lt;- walmart_sales_weekly %&gt;%
    select(id, Date, Weekly_Sales) %&gt;%
    set_names(c(&quot;id&quot;, &quot;date&quot;, &quot;value&quot;))

data_tbl</pre></figure>

<figure class="highlight"><pre>## # A tibble: 1,001 × 3
##    id    date        value
##    &lt;fct&gt; &lt;date&gt;      &lt;dbl&gt;
##  1 1_1   2010-02-05 24924.
##  2 1_1   2010-02-12 46039.
##  3 1_1   2010-02-19 41596.
##  4 1_1   2010-02-26 19404.
##  5 1_1   2010-03-05 21828.
##  6 1_1   2010-03-12 21043.
##  7 1_1   2010-03-19 22137.
##  8 1_1   2010-03-26 26229.
##  9 1_1   2010-04-02 57258.
## 10 1_1   2010-04-09 42961.
## # … with 991 more rows</pre></figure>

<p>The problem with this dataset is that it’s set up for panel data modeling.</p>

<p>The important columns are:</p>

<ul>
  <li>
    <p><strong>“id”:</strong> This separates the time series groups (in this case these represent sales from departments in a walmart store)</p>
  </li>
  <li>
    <p><strong>“date”:</strong> This is the weekly sales period</p>
  </li>
  <li>
    <p><strong>“value”:</strong> This is the value for sales during the week and store/department</p>
  </li>
</ul>

<p><strong>We can visualize</strong> the sales data by time series group (department ID) to expose the differences in sales by department.</p>

<figure class="highlight"><pre>data_tbl %&gt;%
  group_by(id) %&gt;%
  plot_time_series(
    date, value, .interactive = F, .facet_ncol = 2
  )</pre></figure>

<p><img src="https://i0.wp.com/www.business-science.io/figure/source/2021-08-26-modeltime-iterative-forecasting/unnamed-chunk-5-1.png?w=578&#038;ssl=1" alt="plot of chunk unnamed-chunk-5" data-recalc-dims="1" data-lazy-src="https://i0.wp.com/www.business-science.io/figure/source/2021-08-26-modeltime-iterative-forecasting/unnamed-chunk-5-1.png?w=578&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image"><noscript><img src="https://i0.wp.com/www.business-science.io/figure/source/2021-08-26-modeltime-iterative-forecasting/unnamed-chunk-5-1.png?w=578&#038;ssl=1" alt="plot of chunk unnamed-chunk-5" data-recalc-dims="1" /></noscript></p>

<p>We can clearly see that there are 7 time series groups (store departments) with different weekly sales patterns.</p>

<h3 id="nested-forecasting-preparation">Nested Forecasting Preparation</h3>

<p>There are two key components that we need to prepare for:</p>

<ol>
  <li>
    <p><strong>Nested Data Structure:</strong> Most critical to ensure your data is prepared (covered next)</p>
  </li>
  <li>
    <p><strong>Nested Modeltime Workflow:</strong> This stage is where we create many models, fit the models to the data, and generate forecasts at scale</p>
  </li>
</ol>

<p>Conceptually, the workflow looks like this where we combine nested data and tidymodels workflows using an upcoming function, <code>modeltime_nested_fit()</code>.</p>

<p><img src="https://i2.wp.com/www.business-science.io/assets/2021-08-26-modeltime-nested/modeltime_nested_fit.jpg?w=578&#038;ssl=1" alt="Core Functions of Nested Forecasting" data-recalc-dims="1" data-lazy-src="https://i2.wp.com/www.business-science.io/assets/2021-08-26-modeltime-nested/modeltime_nested_fit.jpg?w=578&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image"><noscript><img src="https://i2.wp.com/www.business-science.io/assets/2021-08-26-modeltime-nested/modeltime_nested_fit.jpg?w=578&#038;ssl=1" alt="Core Functions of Nested Forecasting" data-recalc-dims="1" /></noscript></p>

<h2 id="data-preparation-nesting">Data Preparation (Nesting)</h2>

<p><strong>The most critical stage in “Nested Forecasting” is data preparation</strong>, making sure that the input to the nested forecasting workflow is in the appropriate structure. We’ve included several functions to help that involve a bit of forethought that can be broken into 3 steps:</p>

<ol>
  <li>
    <p><strong>Extending each of the times series:</strong> How far into the future do you need to predict for each time series? See <code>extend_timeseries()</code>.</p>
  </li>
  <li>
    <p><strong>Nesting by the grouping variable:</strong> This is where you create the nested structure. You’ll identify the ID column that separates each time series, and the number of timestamps to include in the “.future_data” and optionally “.actual_data”. Typically, you’ll select the same <code>.length_future</code> as your extension from the previous step. See <code>nest_timeseries()</code>.</p>
  </li>
  <li>
    <p><strong>Train/Test Set Splitting:</strong> Finally, you’ll take your <code>.actual_data</code> and convert into train/test splits that can be used for accuracy and confidence interval estimation. See <code>split_nested_timeseries()</code>.</p>
  </li>
</ol>

<p>Here are the 3-steps in action:</p>

<figure class="highlight"><pre>nested_data_tbl &lt;- data_tbl %&gt;%
    
    # 1. Extending: We'll predict 52 weeks into the future.
    extend_timeseries(
        .id_var        = id,
        .date_var      = date,
        .length_future = 52
    ) %&gt;%
    
    # 2. Nesting: We'll group by id, and create a future dataset
    #    that forecasts 52 weeks of extended data and
    #    an actual dataset that contains 104 weeks (2-years of data)
    nest_timeseries(
        .id_var        = id,
        .length_future = 52,
        .length_actual = 52*2
    ) %&gt;%
    
   # 3. Splitting: We'll take the actual data and create splits
   #    for accuracy and confidence interval estimation of 52 weeks (test)
   #    and the rest is training data
    split_nested_timeseries(
        .length_test = 52
    )

nested_data_tbl</pre></figure>

<figure class="highlight"><pre>## # A tibble: 7 × 4
##   id    .actual_data       .future_data      .splits        
##   &lt;fct&gt; &lt;list&gt;             &lt;list&gt;            &lt;list&gt;         
## 1 1_1   &lt;tibble [104 × 2]&gt; &lt;tibble [52 × 2]&gt; &lt;split [52/52]&gt;
## 2 1_3   &lt;tibble [104 × 2]&gt; &lt;tibble [52 × 2]&gt; &lt;split [52/52]&gt;
## 3 1_8   &lt;tibble [104 × 2]&gt; &lt;tibble [52 × 2]&gt; &lt;split [52/52]&gt;
## 4 1_13  &lt;tibble [104 × 2]&gt; &lt;tibble [52 × 2]&gt; &lt;split [52/52]&gt;
## 5 1_38  &lt;tibble [104 × 2]&gt; &lt;tibble [52 × 2]&gt; &lt;split [52/52]&gt;
## 6 1_93  &lt;tibble [104 × 2]&gt; &lt;tibble [52 × 2]&gt; &lt;split [52/52]&gt;
## 7 1_95  &lt;tibble [104 × 2]&gt; &lt;tibble [52 × 2]&gt; &lt;split [52/52]&gt;</pre></figure>

<p>This creates a nested tibble with “.actual_data”, “.future_data”, and “.splits”. Each column will help in the nested modeltime workflow.</p>

<h2 id="nested-modeltime-workflow">Nested Modeltime Workflow</h2>

<p>Next, we move into the <strong>Nested Modeltime Workflow</strong> now that nested data has been created. The Nested Modeltime Workflow includes 3 core functions:</p>

<ol>
  <li>
    <p><strong>Modeling Fitting:</strong> This is the training stage where we fit to <em>training data</em>. The <em>test forecast</em> is generated from this step. See <code>modeltime_nested_fit()</code>.</p>
  </li>
  <li>
    <p><strong>Model Evaluation and Selection:</strong> This is where we review model performance and select the best model by minimizing or maximizing an error metric. See <code>modeltime_nested_select_best()</code>.</p>
  </li>
  <li>
    <p><strong>Model Refitting:</strong> This is the final fitting stage where we fit to <em>actual data</em>. The <em>future forecast</em> is generated from this step. See <code>modeltime_nested_refit()</code>.</p>
  </li>
</ol>

<p><img src="https://i0.wp.com/www.business-science.io/assets/2021-08-26-modeltime-nested/nested-core-functions.jpg?w=578&#038;ssl=1" alt="Core Functions of Nested Forecasting" data-recalc-dims="1" data-lazy-src="https://i0.wp.com/www.business-science.io/assets/2021-08-26-modeltime-nested/nested-core-functions.jpg?w=578&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image"><noscript><img src="https://i0.wp.com/www.business-science.io/assets/2021-08-26-modeltime-nested/nested-core-functions.jpg?w=578&#038;ssl=1" alt="Core Functions of Nested Forecasting" data-recalc-dims="1" /></noscript></p>

<h3 id="step-1-create-tidymodels-workflows">Step 1: Create Tidymodels Workflows</h3>

<p>First, we create <code>tidymodels</code> workflows for the various models that you intend to create.</p>

<h4 id="prophet">Prophet</h4>

<p>A common modeling method is prophet, that can be created using <code>prophet_reg()</code>. We’ll create a workflow. Note that we use the first <code>nested_data_tbl$.splits[[1]])</code> to help us determine how to build features.</p>

<figure class="highlight"><pre>rec_prophet &lt;- recipe(value ~ date, training(nested_data_tbl$.splits[[1]])) 

wflw_prophet &lt;- workflow() %&gt;%
    add_model(
      prophet_reg(&quot;regression&quot;, seasonality_yearly = TRUE) %&gt;% 
        set_engine(&quot;prophet&quot;)
    ) %&gt;%
    add_recipe(rec_prophet)</pre></figure>

<h4 id="xgboost">XGBoost</h4>

<p>Next, we can use a machine learning method that can get good results: XGBoost. We will add a few extra features in the recipe feature engineering step to generate features that tend to get better modeling results. Note that we use the first <code>nested_data_tbl$.splits[[1]])</code> to help us determine how to build features.</p>

<figure class="highlight"><pre>rec_xgb &lt;- recipe(value ~ ., training(nested_data_tbl$.splits[[1]])) %&gt;%
    step_timeseries_signature(date) %&gt;%
    step_rm(date) %&gt;%
    step_zv(all_predictors()) %&gt;%
    step_dummy(all_nominal_predictors(), one_hot = TRUE)

wflw_xgb &lt;- workflow() %&gt;%
    add_model(boost_tree(&quot;regression&quot;) %&gt;% set_engine(&quot;xgboost&quot;)) %&gt;%
    add_recipe(rec_xgb)</pre></figure>

<h3 id="step-2-nested-modeltime-tables">Step 2: Nested Modeltime Tables</h3>

<p>With a couple of modeling workflows in hand, we are now ready to test them on each of the time series. We start by using the <code>modeltime_nested_fit()</code> function, which iteratively fits each model to each of the nested time series train/test “.splits” column.</p>

<figure class="highlight"><pre>nested_modeltime_tbl &lt;- modeltime_nested_fit(
  # Nested data 
  nested_data = nested_data_tbl,
  
  # Add workflows
  wflw_prophet,
  wflw_xgb
)

nested_modeltime_tbl</pre></figure>

<figure class="highlight"><pre>## # Nested Modeltime Table
## # Trained on: .splits | Model Errors: [0]
## # A tibble: 7 × 5
##   id    .actual_data       .future_data     .splits        .modeltime_tables    
##   &lt;fct&gt; &lt;list&gt;             &lt;list&gt;           &lt;list&gt;         &lt;list&gt;               
## 1 1_1   &lt;tibble [104 × 2]&gt; &lt;tibble [52 × 2… &lt;split [52/52… &lt;mdl_time_tbl [2 × 5…
## 2 1_3   &lt;tibble [104 × 2]&gt; &lt;tibble [52 × 2… &lt;split [52/52… &lt;mdl_time_tbl [2 × 5…
## 3 1_8   &lt;tibble [104 × 2]&gt; &lt;tibble [52 × 2… &lt;split [52/52… &lt;mdl_time_tbl [2 × 5…
## 4 1_13  &lt;tibble [104 × 2]&gt; &lt;tibble [52 × 2… &lt;split [52/52… &lt;mdl_time_tbl [2 × 5…
## 5 1_38  &lt;tibble [104 × 2]&gt; &lt;tibble [52 × 2… &lt;split [52/52… &lt;mdl_time_tbl [2 × 5…
## 6 1_93  &lt;tibble [104 × 2]&gt; &lt;tibble [52 × 2… &lt;split [52/52… &lt;mdl_time_tbl [2 × 5…
## 7 1_95  &lt;tibble [104 × 2]&gt; &lt;tibble [52 × 2… &lt;split [52/52… &lt;mdl_time_tbl [2 × 5…</pre></figure>

<p>This adds a new column with <code>.modeltime_tables</code> for each of the data sets and has created several <strong>logged attributes</strong> that are part of the “Nested Modeltime Table”. We also can see that the models were trained on “.splits” and none of the models had any errors.</p>

<h3 id="step-3-logged-attributes">Step 3: Logged Attributes</h3>

<p>During the forecasting, the iterative modeltime fitting process logs important information that enable us to evaluate the models. These logged attributes are accessable with “extract” functions.</p>

<h4 id="extract-nested-test-accuracy">Extract Nested Test Accuracy</h4>

<p>Using the <code>extract_nested_test_accuracy()</code>, we can get the accuracy measures by time series and model. This allows us to see which model performs best on which time series.</p>

<figure class="highlight"><pre>nested_modeltime_tbl %&gt;% 
  extract_nested_test_accuracy() %&gt;%
  table_modeltime_accuracy(.interactive = F)</pre></figure>

<!--html_preserve-->
<div id="hntciiongg" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#hntciiongg .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#hntciiongg .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#hntciiongg .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#hntciiongg .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#hntciiongg .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hntciiongg .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#hntciiongg .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#hntciiongg .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#hntciiongg .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#hntciiongg .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#hntciiongg .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#hntciiongg .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#hntciiongg .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#hntciiongg .gt_from_md > :first-child {
  margin-top: 0;
}

#hntciiongg .gt_from_md > :last-child {
  margin-bottom: 0;
}

#hntciiongg .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#hntciiongg .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#hntciiongg .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#hntciiongg .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#hntciiongg .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#hntciiongg .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#hntciiongg .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#hntciiongg .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hntciiongg .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#hntciiongg .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#hntciiongg .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#hntciiongg .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#hntciiongg .gt_left {
  text-align: left;
}

#hntciiongg .gt_center {
  text-align: center;
}

#hntciiongg .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#hntciiongg .gt_font_normal {
  font-weight: normal;
}

#hntciiongg .gt_font_bold {
  font-weight: bold;
}

#hntciiongg .gt_font_italic {
  font-style: italic;
}

#hntciiongg .gt_super {
  font-size: 65%;
}

#hntciiongg .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<table class="gt_table">
  <thead class="gt_header">
    <tr>
      <th colspan="10" class="gt_heading gt_title gt_font_normal gt_bottom_border" style="">Accuracy Table</th>
    </tr>
    
  </thead>
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">id</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">.model_id</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">.model_desc</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">.type</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">mae</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">mape</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">mase</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">smape</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">rmse</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">rsq</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_center">1_1</td>
<td class="gt_row gt_right">1</td>
<td class="gt_row gt_left">PROPHET</td>
<td class="gt_row gt_left">Test</td>
<td class="gt_row gt_right">10071.47</td>
<td class="gt_row gt_right">45.88</td>
<td class="gt_row gt_right">1.99</td>
<td class="gt_row gt_right">59.97</td>
<td class="gt_row gt_right">11776.87</td>
<td class="gt_row gt_right">0.38</td></tr>
    <tr><td class="gt_row gt_center">1_1</td>
<td class="gt_row gt_right">2</td>
<td class="gt_row gt_left">XGBOOST</td>
<td class="gt_row gt_left">Test</td>
<td class="gt_row gt_right">6236.79</td>
<td class="gt_row gt_right">25.31</td>
<td class="gt_row gt_right">1.23</td>
<td class="gt_row gt_right">24.57</td>
<td class="gt_row gt_right">9017.22</td>
<td class="gt_row gt_right">0.19</td></tr>
    <tr><td class="gt_row gt_center">1_3</td>
<td class="gt_row gt_right">1</td>
<td class="gt_row gt_left">PROPHET</td>
<td class="gt_row gt_left">Test</td>
<td class="gt_row gt_right">3539.80</td>
<td class="gt_row gt_right">29.87</td>
<td class="gt_row gt_right">1.37</td>
<td class="gt_row gt_right">25.46</td>
<td class="gt_row gt_right">4707.77</td>
<td class="gt_row gt_right">0.80</td></tr>
    <tr><td class="gt_row gt_center">1_3</td>
<td class="gt_row gt_right">2</td>
<td class="gt_row gt_left">XGBOOST</td>
<td class="gt_row gt_left">Test</td>
<td class="gt_row gt_right">3085.78</td>
<td class="gt_row gt_right">18.81</td>
<td class="gt_row gt_right">1.20</td>
<td class="gt_row gt_right">20.40</td>
<td class="gt_row gt_right">5085.81</td>
<td class="gt_row gt_right">0.79</td></tr>
    <tr><td class="gt_row gt_center">1_8</td>
<td class="gt_row gt_right">1</td>
<td class="gt_row gt_left">PROPHET</td>
<td class="gt_row gt_left">Test</td>
<td class="gt_row gt_right">4282.96</td>
<td class="gt_row gt_right">11.15</td>
<td class="gt_row gt_right">1.82</td>
<td class="gt_row gt_right">11.96</td>
<td class="gt_row gt_right">4845.08</td>
<td class="gt_row gt_right">0.00</td></tr>
    <tr><td class="gt_row gt_center">1_8</td>
<td class="gt_row gt_right">2</td>
<td class="gt_row gt_left">XGBOOST</td>
<td class="gt_row gt_left">Test</td>
<td class="gt_row gt_right">3585.77</td>
<td class="gt_row gt_right">9.33</td>
<td class="gt_row gt_right">1.53</td>
<td class="gt_row gt_right">9.89</td>
<td class="gt_row gt_right">4009.47</td>
<td class="gt_row gt_right">0.30</td></tr>
    <tr><td class="gt_row gt_center">1_13</td>
<td class="gt_row gt_right">1</td>
<td class="gt_row gt_left">PROPHET</td>
<td class="gt_row gt_left">Test</td>
<td class="gt_row gt_right">6861.13</td>
<td class="gt_row gt_right">17.02</td>
<td class="gt_row gt_right">2.53</td>
<td class="gt_row gt_right">18.78</td>
<td class="gt_row gt_right">7309.61</td>
<td class="gt_row gt_right">0.15</td></tr>
    <tr><td class="gt_row gt_center">1_13</td>
<td class="gt_row gt_right">2</td>
<td class="gt_row gt_left">XGBOOST</td>
<td class="gt_row gt_left">Test</td>
<td class="gt_row gt_right">2338.42</td>
<td class="gt_row gt_right">5.83</td>
<td class="gt_row gt_right">0.86</td>
<td class="gt_row gt_right">6.02</td>
<td class="gt_row gt_right">2721.47</td>
<td class="gt_row gt_right">0.54</td></tr>
    <tr><td class="gt_row gt_center">1_38</td>
<td class="gt_row gt_right">1</td>
<td class="gt_row gt_left">PROPHET</td>
<td class="gt_row gt_left">Test</td>
<td class="gt_row gt_right">26007.21</td>
<td class="gt_row gt_right">32.57</td>
<td class="gt_row gt_right">2.22</td>
<td class="gt_row gt_right">39.60</td>
<td class="gt_row gt_right">27938.83</td>
<td class="gt_row gt_right">0.08</td></tr>
    <tr><td class="gt_row gt_center">1_38</td>
<td class="gt_row gt_right">2</td>
<td class="gt_row gt_left">XGBOOST</td>
<td class="gt_row gt_left">Test</td>
<td class="gt_row gt_right">6847.04</td>
<td class="gt_row gt_right">8.47</td>
<td class="gt_row gt_right">0.58</td>
<td class="gt_row gt_right">8.75</td>
<td class="gt_row gt_right">8825.28</td>
<td class="gt_row gt_right">0.40</td></tr>
    <tr><td class="gt_row gt_center">1_93</td>
<td class="gt_row gt_right">1</td>
<td class="gt_row gt_left">PROPHET</td>
<td class="gt_row gt_left">Test</td>
<td class="gt_row gt_right">17165.30</td>
<td class="gt_row gt_right">21.37</td>
<td class="gt_row gt_right">1.73</td>
<td class="gt_row gt_right">24.46</td>
<td class="gt_row gt_right">19123.17</td>
<td class="gt_row gt_right">0.03</td></tr>
    <tr><td class="gt_row gt_center">1_93</td>
<td class="gt_row gt_right">2</td>
<td class="gt_row gt_left">XGBOOST</td>
<td class="gt_row gt_left">Test</td>
<td class="gt_row gt_right">7233.95</td>
<td class="gt_row gt_right">9.11</td>
<td class="gt_row gt_right">0.73</td>
<td class="gt_row gt_right">9.66</td>
<td class="gt_row gt_right">8879.21</td>
<td class="gt_row gt_right">0.49</td></tr>
    <tr><td class="gt_row gt_center">1_95</td>
<td class="gt_row gt_right">1</td>
<td class="gt_row gt_left">PROPHET</td>
<td class="gt_row gt_left">Test</td>
<td class="gt_row gt_right">22836.06</td>
<td class="gt_row gt_right">18.30</td>
<td class="gt_row gt_right">2.75</td>
<td class="gt_row gt_right">20.37</td>
<td class="gt_row gt_right">24094.49</td>
<td class="gt_row gt_right">0.48</td></tr>
    <tr><td class="gt_row gt_center">1_95</td>
<td class="gt_row gt_right">2</td>
<td class="gt_row gt_left">XGBOOST</td>
<td class="gt_row gt_left">Test</td>
<td class="gt_row gt_right">10783.75</td>
<td class="gt_row gt_right">8.54</td>
<td class="gt_row gt_right">1.30</td>
<td class="gt_row gt_right">8.96</td>
<td class="gt_row gt_right">12843.50</td>
<td class="gt_row gt_right">0.14</td></tr>
  </tbody>
  
  
</table>
</div>
<!--/html_preserve-->

<h4 id="extract-nested-test-forecast">Extract Nested Test Forecast</h4>

<p>Next, we can visualize the test forecast with <code>extract_nested_test_forecast()</code>.</p>

<figure class="highlight"><pre>nested_modeltime_tbl %&gt;% 
  extract_nested_test_forecast() %&gt;%
  group_by(id) %&gt;%
  plot_modeltime_forecast(
    .facet_ncol  = 2,
    .interactive = FALSE
  )</pre></figure>

<p><img src="https://i2.wp.com/www.business-science.io/figure/source/2021-08-26-modeltime-iterative-forecasting/unnamed-chunk-11-1.png?w=578&#038;ssl=1" alt="plot of chunk unnamed-chunk-11" data-recalc-dims="1" data-lazy-src="https://i2.wp.com/www.business-science.io/figure/source/2021-08-26-modeltime-iterative-forecasting/unnamed-chunk-11-1.png?w=578&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image"><noscript><img src="https://i2.wp.com/www.business-science.io/figure/source/2021-08-26-modeltime-iterative-forecasting/unnamed-chunk-11-1.png?w=578&#038;ssl=1" alt="plot of chunk unnamed-chunk-11" data-recalc-dims="1" /></noscript></p>

<h4 id="extract-nested-error-logs">Extract Nested Error Logs</h4>

<p>If any of the models have errors, then we can investigate the error logs with <code>extract_nested_error_report()</code>. Fortunately, we don’t have any errors, but if we did we could investigate further.</p>

<figure class="highlight"><pre>nested_modeltime_tbl %&gt;% 
  extract_nested_error_report()</pre></figure>

<figure class="highlight"><pre>## # A tibble: 0 × 4
## # … with 4 variables: id &lt;fct&gt;, .model_id &lt;int&gt;, .model_desc &lt;chr&gt;,
## #   .error_desc &lt;chr&gt;</pre></figure>

<h3 id="step-4-select-the-best">Step 4: Select the Best</h3>

<p>Using the accuracy data, we can pick a metric and select the best model based on that metric. The available metrics are in the <code>default_forecast_accuracy_metric_set()</code>. Make sure to select <code>minimize</code> based on the metric. The <code>filter_test_forecasts</code> parameter tells the function to filter the logged test forecasts to just the best.</p>

<figure class="highlight"><pre>best_nested_modeltime_tbl &lt;- nested_modeltime_tbl %&gt;%
            modeltime_nested_select_best(
              metric                = &quot;rmse&quot;, 
              minimize              = TRUE, 
              filter_test_forecasts = TRUE
            )</pre></figure>

<p>This identifies which models should be used for the final forecast. With the models selected, we can make the future forecast.</p>

<h4 id="extract-nested-best-model-report">Extract Nested Best Model Report</h4>

<p>The best model selections can be accessed with <code>extract_nested_best_model_report()</code>.</p>

<figure class="highlight"><pre>best_nested_modeltime_tbl %&gt;%
  extract_nested_best_model_report()</pre></figure>

<figure class="highlight"><pre>## # Nested Modeltime Table
##   # A tibble: 7 × 10
##   id    .model_id .model_desc .type    mae  mape  mase smape   rmse   rsq
##   &lt;fct&gt;     &lt;int&gt; &lt;chr&gt;       &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;
## 1 1_1           2 XGBOOST     Test   6237. 25.3  1.23  24.6   9017. 0.191
## 2 1_3           1 PROPHET     Test   3540. 29.9  1.37  25.5   4708. 0.796
## 3 1_8           2 XGBOOST     Test   3586.  9.33 1.53   9.89  4009. 0.297
## 4 1_13          2 XGBOOST     Test   2338.  5.83 0.861  6.02  2721. 0.536
## 5 1_38          2 XGBOOST     Test   6847.  8.47 0.585  8.75  8825. 0.402
## 6 1_93          2 XGBOOST     Test   7234.  9.11 0.728  9.66  8879. 0.488
## 7 1_95          2 XGBOOST     Test  10784.  8.54 1.30   8.96 12843. 0.139</pre></figure>

<h4 id="extract-nested-best-test-forecasts">Extract Nested Best Test Forecasts</h4>

<p>Once we’ve selected the best models, we can easily visualize the best forecasts by time series. Note that the nested test forecast logs have been modified to isolate the best models.</p>

<figure class="highlight"><pre>best_nested_modeltime_tbl %&gt;%
  extract_nested_test_forecast() %&gt;%
  group_by(id) %&gt;%
  plot_modeltime_forecast(
    .facet_ncol  = 2,
    .interactive = FALSE
  )</pre></figure>

<p><img src="https://i0.wp.com/www.business-science.io/figure/source/2021-08-26-modeltime-iterative-forecasting/unnamed-chunk-15-1.png?w=578&#038;ssl=1" alt="plot of chunk unnamed-chunk-15" data-recalc-dims="1" data-lazy-src="https://i0.wp.com/www.business-science.io/figure/source/2021-08-26-modeltime-iterative-forecasting/unnamed-chunk-15-1.png?w=578&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image"><noscript><img src="https://i0.wp.com/www.business-science.io/figure/source/2021-08-26-modeltime-iterative-forecasting/unnamed-chunk-15-1.png?w=578&#038;ssl=1" alt="plot of chunk unnamed-chunk-15" data-recalc-dims="1" /></noscript></p>

<h3 id="step-5-refitting-and-future-forecast">Step 5: Refitting and Future Forecast</h3>

<p>With the best models in hand, we can make our future forecasts by refitting the models to the full dataset.</p>

<ul>
  <li>
    <p>If the best models have been selected, the only the best models will be refit.</p>
  </li>
  <li>
    <p>If best models have not been selected, then all models will be refit.</p>
  </li>
</ul>

<p>We’ve selected our best models, and will move forward with refitting and future forecast logging using the <code>modeltime_nested_refit()</code> function.</p>

<figure class="highlight"><pre>nested_modeltime_refit_tbl &lt;- best_nested_modeltime_tbl %&gt;%
    modeltime_nested_refit(
        control = control_nested_refit(verbose = TRUE)
    )

## ℹ [1/7] Starting Modeltime Table: ID 1_1...
## ✓ Model 2 Passed XGBOOST.
## ✓ [1/7] Finished Modeltime Table: ID 1_1

## ℹ [2/7] Starting Modeltime Table: ID 1_3...
## ✓ Model 1 Passed PROPHET.
## ✓ [2/7] Finished Modeltime Table: ID 1_3

## ℹ [3/7] Starting Modeltime Table: ID 1_8...
## ✓ Model 2 Passed XGBOOST.
## ✓ [3/7] Finished Modeltime Table: ID 1_8

## ℹ [4/7] Starting Modeltime Table: ID 1_13...
## ✓ Model 2 Passed XGBOOST.
## ✓ [4/7] Finished Modeltime Table: ID 1_13

## ℹ [5/7] Starting Modeltime Table: ID 1_38...
## ✓ Model 2 Passed XGBOOST.
## ✓ [5/7] Finished Modeltime Table: ID 1_38

## ℹ [6/7] Starting Modeltime Table: ID 1_93...
## ✓ Model 2 Passed XGBOOST.
## ✓ [6/7] Finished Modeltime Table: ID 1_93

## ℹ [7/7] Starting Modeltime Table: ID 1_95...
## ✓ Model 2 Passed XGBOOST.
## ✓ [7/7] Finished Modeltime Table: ID 1_95

## Finished in: 3.52616 secs.</pre></figure>

<p>Note that we used <code>control_nested_refit(verbose = TRUE)</code> to display the modeling results as each model is refit. This is not necessary, but can be useful to follow the nested model fitting process.</p>

<p>We can see that the nested modeltime table appears the same, but has now been trained on <code>.actual_data</code>.</p>

<figure class="highlight"><pre>nested_modeltime_refit_tbl

## # Nested Modeltime Table
## # Trained on: .actual_data | Model Errors: [0]
## # A tibble: 7 × 5
##   id    .actual_data       .future_data     .splits        .modeltime_tables    
##   &lt;fct&gt; &lt;list&gt;             &lt;list&gt;           &lt;list&gt;         &lt;list&gt;               
## 1 1_1   &lt;tibble [104 × 2]&gt; &lt;tibble [52 × 2… &lt;split [52/52… &lt;mdl_time_tbl [1 × 5…
## 2 1_3   &lt;tibble [104 × 2]&gt; &lt;tibble [52 × 2… &lt;split [52/52… &lt;mdl_time_tbl [1 × 5…
## 3 1_8   &lt;tibble [104 × 2]&gt; &lt;tibble [52 × 2… &lt;split [52/52… &lt;mdl_time_tbl [1 × 5…
## 4 1_13  &lt;tibble [104 × 2]&gt; &lt;tibble [52 × 2… &lt;split [52/52… &lt;mdl_time_tbl [1 × 5…
## 5 1_38  &lt;tibble [104 × 2]&gt; &lt;tibble [52 × 2… &lt;split [52/52… &lt;mdl_time_tbl [1 × 5…
## 6 1_93  &lt;tibble [104 × 2]&gt; &lt;tibble [52 × 2… &lt;split [52/52… &lt;mdl_time_tbl [1 × 5…
## 7 1_95  &lt;tibble [104 × 2]&gt; &lt;tibble [52 × 2… &lt;split [52/52… &lt;mdl_time_tbl [1 × 5…</pre></figure>

<h4 id="extract-nested-future-forecast">Extract Nested Future Forecast</h4>

<p>After the refitting process completes, we can now access the future forecast, which is logged.</p>

<figure class="highlight"><pre>nested_modeltime_refit_tbl %&gt;%
  extract_nested_future_forecast() %&gt;%
  group_by(id) %&gt;%
  plot_modeltime_forecast(
    .interactive = FALSE,
    .facet_ncol  = 2
  )</pre></figure>

<p><img src="https://i1.wp.com/www.business-science.io/figure/source/2021-08-26-modeltime-iterative-forecasting/unnamed-chunk-18-1.png?w=578&#038;ssl=1" alt="plot of chunk unnamed-chunk-18" data-recalc-dims="1" data-lazy-src="https://i1.wp.com/www.business-science.io/figure/source/2021-08-26-modeltime-iterative-forecasting/unnamed-chunk-18-1.png?w=578&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image"><noscript><img src="https://i1.wp.com/www.business-science.io/figure/source/2021-08-26-modeltime-iterative-forecasting/unnamed-chunk-18-1.png?w=578&#038;ssl=1" alt="plot of chunk unnamed-chunk-18" data-recalc-dims="1" /></noscript></p>

<h2 id="summary">Summary</h2>

<p>We’ve now successfully completed a <strong>Nested Forecast.</strong> You may find this challenging, especially if you are not familiar with the Modeltime Workflow, terminology, or tidymodeling in R. If this is the case, we have a solution. Take our <a href="https://university.business-science.io/p/ds4b-203-r-high-performance-time-series-forecasting/" rel="nofollow" target="_blank">high-performance time series forecasting course</a>.  👇</p>

<h1 id="theres-a-lot-to-learn">There’s a lot to learn</h1>

<p><strong>There’s a lot more to learning time series:</strong></p>

<ul>
  <li>Many more algorithms</li>
  <li>Feature Engineering for Time Series</li>
  <li>Ensembling</li>
  <li>Machine Learning</li>
  <li>Deep Learning</li>
  <li>Scalable Modeling: 10,000+ time series</li>
</ul>

<p>Your probably thinking how am I ever going to learn time series forecasting. Here’s the solution that will save you years of struggling.</p>

<h1 id="it-gets-betteryouve-just-scratched-the-surface-heres-whats-coming">It gets better<br /><small>You’ve just scratched the surface, here’s what’s coming…</small></h1>

<p>The Modeltime Ecosystem functionality is much more feature-rich than what we’ve covered here (I couldn’t possibly cover everything in this post). 😀</p>

<p>Here’s what I didn’t cover:</p>

<ul>
  <li>
    <p><strong>Feature Engineering:</strong> We can make this forecast much more accurate by including features from competition-winning strategies</p>
  </li>
  <li>
    <p><strong>Ensemble Modeling:</strong> We can stack models together to make super-learners that stabilize predictions.</p>
  </li>
  <li>
    <p><strong>Deep Learning:</strong> We can use GluonTS Deep Learning for developing high-performance, scalable forecasts.</p>
  </li>
</ul>

<h3 id="so-how-are-you-ever-going-to-learn-time-series-analysis-and-forecasting">So how are you ever going to <span style="color:#18bc9c">learn time series analysis and forecasting?</span></h3>

<p>You’re probably thinking:</p>

<ul>
  <li>There’s so much to learn</li>
  <li>My time is precious</li>
  <li>I’ll never learn time series</li>
</ul>

<p>I have good news that will put those doubts behind you.</p>

<p>You can learn time series analysis and forecasting in hours with my <a href="https://university.business-science.io/p/ds4b-203-r-high-performance-time-series-forecasting/" rel="nofollow" target="_blank">high-performance time series forecasting course</a>. 👇</p>

<h2 id="time-series-course">High-Performance Time Series Course<br /><small>Become the times series expert in your organization.</small></h2>

<p>My <strong><em>High-Performance Time Series Forecasting in R course</em></strong> is available now. You’ll learn <code>timetk</code> and <code>modeltime</code> plus the most powerful time series forecasting techniques available like GluonTS Deep Learning. Become the times series domain expert in your organization.</p>

<p>👉 <a href="https://university.business-science.io/p/ds4b-203-r-high-performance-time-series-forecasting/" rel="nofollow" target="_blank"><strong>High-Performance Time Series Course.</strong></a></p>

<div class="" style="width:100%; ">
  <a href="https://university.business-science.io/p/ds4b-203-r-high-performance-time-series-forecasting/" rel="nofollow" target="_blank">
  <!--<img class="img-responsive jetpack-lazy-image" src="https://i0.wp.com/www.business-science.io/assets/2020-06-05-timetk/time_series_course.jpg?w=578&#038;ssl=1" data-recalc-dims="1" data-lazy-src="https://i0.wp.com/www.business-science.io/assets/2020-06-05-timetk/time_series_course.jpg?w=578&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"><noscript><img class="img-responsive" src="https://i0.wp.com/www.business-science.io/assets/2020-06-05-timetk/time_series_course.jpg?w=578&#038;ssl=1" data-recalc-dims="1"></noscript> -->
  
  <!--<img class="img-responsive jetpack-lazy-image" src="https://i1.wp.com/www.business-science.io/assets/2020-06-17-acf/time_series_course.jpg?w=578&#038;ssl=1" data-recalc-dims="1" data-lazy-src="https://i1.wp.com/www.business-science.io/assets/2020-06-17-acf/time_series_course.jpg?w=578&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"><noscript><img class="img-responsive" src="https://i1.wp.com/www.business-science.io/assets/2020-06-17-acf/time_series_course.jpg?w=578&#038;ssl=1" data-recalc-dims="1"></noscript> -->
  <img class="img-responsive jetpack-lazy-image" src="https://www.filepicker.io/api/file/jay1WUozSWCVHfFBEil3" data-lazy-src="https://www.filepicker.io/api/file/jay1WUozSWCVHfFBEil3?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"><noscript><img class="img-responsive" src="https://www.filepicker.io/api/file/jay1WUozSWCVHfFBEil3" /></noscript>
  
  </a>
</div>
<p><br />
You will learn:</p>

<ul>
  <li><strong>Time Series Foundations</strong> - Visualization, Preprocessing, Noise Reduction, & Anomaly Detection</li>
  <li><strong>Feature Engineering</strong> using lagged variables & external regressors</li>
  <li><strong>Hyperparameter Tuning</strong> - For both sequential and non-sequential models</li>
  <li><strong>Time Series Cross-Validation (TSCV)</strong></li>
  <li><strong>Ensembling</strong> Multiple Machine Learning & Univariate Modeling Techniques (Competition Winner)</li>
  <li><strong>Deep Learning with GluonTS</strong> (Competition Winner)</li>
  <li>and more.</li>
</ul>

<p class="text-center" style="font-size:30px;">
<a href="https://university.business-science.io/p/ds4b-203-r-high-performance-time-series-forecasting/" rel="nofollow" target="_blank">Unlock the High-Performance Time Series Course</a>
</p>

<h1 id="have-questions-about-modeltime">Have questions about Modeltime?</h1>

<p>Make a comment in the chat below. 👇</p>

<p>And, if you plan on using <code>modeltime</code> for your business, it’s a no-brainer - <a href="https://university.business-science.io/p/ds4b-203-r-high-performance-time-series-forecasting" rel="nofollow" target="_blank">Join my Time Series Course</a>.</p>


<script type="2b35157d11c2ea52143dce53-text/javascript">
    var vglnk = {key: '949efb41171ac6ec1bf7f206d57e90b8'};
    (function(d, t) {
        var s = d.createElement(t);
            s.type = 'text/javascript';
            s.async = true;
			// s.defer = true;
//          s.src = '//cdn.viglink.com/api/vglnk.js'; 
			s.src = 'https://www.r-bloggers.com/wp-content/uploads/2020/08/vglnk.js';
        var r = d.getElementsByTagName(t)[0];
            r.parentNode.insertBefore(s, r);
    }(document, 'script'));
</script>
		
<div id='jp-relatedposts' class='jp-relatedposts' >
	<h3 class="jp-relatedposts-headline"><em>Related</em></h3>
</div><aside class="mashsb-container mashsb-main mashsb-stretched"><div class="mashsb-box"><div class="mashsb-buttons"><a class="mashicon-facebook mash-large mash-center mashsb-noshadow" href="https://www.facebook.com/sharer.php?u=https%3A%2F%2Fwww.r-bloggers.com%2F2021%2F08%2Fintroducing-iterative-nested-forecasting-with-modeltime%2F" target="_blank" rel="nofollow"><span class="icon"></span><span class="text">Share</span></a><a class="mashicon-twitter mash-large mash-center mashsb-noshadow" href="https://twitter.com/intent/tweet?text=Introducing%20Iterative%20%28Nested%29%20Forecasting%20with%20Modeltime&url=https://www.r-bloggers.com/2021/08/introducing-iterative-nested-forecasting-with-modeltime/&via=Rbloggers" target="_blank" rel="nofollow"><span class="icon"></span><span class="text">Tweet</span></a><div class="onoffswitch2 mash-large mashsb-noshadow" style="display:none;"></div></div>
            </div>
                <div style="clear:both;"></div></aside>
            <!-- Share buttons by mashshare.net - Version: 3.7.9-->
<p class="syndicated-attribution"><div style="border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 13px;">
<div style="text-align: center;">To <strong>leave a comment</strong> for the author, please follow the link and comment on their blog: <strong><a href="https://www.business-science.io/code-tools/2021/08/26/modeltime-iterative-forecasting.html"> business-science.io</a></strong>.</div>
<hr />
<a href="https://www.r-bloggers.com/" rel="nofollow">R-bloggers.com</a> offers <strong><a href="https://feedburner.google.com/fb/a/mailverify?uri=RBloggers" rel="nofollow">daily e-mail updates</a></strong> about <a title="The R Project for Statistical Computing" href="https://www.r-project.org/" rel="nofollow">R</a> news and tutorials about <a title="R tutorials" href="https://www.r-bloggers.com/how-to-learn-r-2/" rel="nofollow">learning R</a> and many other topics. <a title="Data science jobs" href="https://www.r-users.com/" rel="nofollow">Click here if you're looking to post or find an R/data-science job</a>.

<hr>Want to share your content on R-bloggers?<a href="https://www.r-bloggers.com/add-your-blog/" rel="nofollow"> click here</a> if you have a blog, or <a href="https://r-posts.com/" rel="nofollow"> here</a> if you don't.
</div></p>			</div>
	</article><nav class="post-navigation clearfix" role="navigation">
<div class="post-nav left">
<a href="https://www.r-bloggers.com/2021/08/a-lightweight-data-validation-ecosystem-with-r-github-and-slack/" rel="prev">&larr; Previous post</a></div>
<div class="post-nav right">
<a href="https://www.r-bloggers.com/2021/08/earl-online-2021-dr-branka-subotic-keynote-speaker/" rel="next">Next post &rarr;</a></div>
</nav>
	</div>
	<aside class="mh-sidebar sb-right">
	<div id="custom_html-2" class="widget_text sb-widget widget_custom_html"><div class="textwidget custom-html-widget">
<div class="top-search" style="padding-left: 0px;">
	<form id="searchform" action="https://www.google.com/cse" target="_blank">
		<div>
			<input type="hidden" name="cx" value="005359090438081006639:paz69t-s8ua" />
			<input type="hidden" name="ie" value="UTF-8" />
			<input type="text" value="" name="q" id="q" autocomplete="on" style="font-size:16px;" placeholder="Search R-bloggers.." />
			<input type="submit" id="searchsubmit2" name="sa" value="Go" style="font-size:16px;" />
		</div>
	</form>

</div>
<!-- thanks: https://stackoverflow.com/questions/14981575/google-cse-with-a-custom-form 
https://stackoverflow.com/questions/10363674/change-size-of-text-in-text-input-tag
--></div></div><div id="text-6" class="sb-widget widget_text">			<div class="textwidget"><div style="min-height:26px;border:1px solid #ccc;padding:3px;text-align:left; background: none repeat scroll 0 0 #FDEADA;">

<form  style="width:202px; float:left;" action="https://api.follow.it/subscription-form/WFJiMk5MeWYwSzBGYlNmektaT1BoR0hubWVOUE9EZXpBbkxlVEFRTDMzV3VRMWpLQTZDdjRLZVdwL25pWWhNSVI5b1ltdGNicTFRVytkelR0azdFajZ1MFVKdzU0VVc1VTJQTldpWWJsSXVaUjBGTVdVQ201SHFVZ1JpSkpXSCt8OU1aQndsUjZOaGlGNUVtNHRESk9zUnN6SUJBcmdDZE9kNkdJL3hKa2wvOD0=/8" method="post" target="popupwindow">

<input type="text" style="width:110px" onclick="if (!window.__cfRLUnblockHandlers) return false; if (this.value == 'Your e-mail here') this.value = '';" value='Your e-mail here' name="email" data-cf-modified-2b35157d11c2ea52143dce53-="" />
<input type="hidden" value="RBloggers" name="uri"/><input type="hidden" name="loc" value="en_US"/><input type="submit" value="Subscribe" />

</form>


<div>
<a href="https://feeds.feedburner.com/RBloggers"><img src="https://i1.wp.com/www.r-bloggers.com/wp-content/uploads/2020/07/RBloggers_feedburner_count_2020_07_01-e1593671704447.gif?w=578&#038;ssl=1" style="height:17px;min-width:80px;class:skip-lazy;" alt data-recalc-dims="1" data-lazy-src="https://i1.wp.com/www.r-bloggers.com/wp-content/uploads/2020/07/RBloggers_feedburner_count_2020_07_01-e1593671704447.gif?w=578&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image"><noscript><img src="https://i1.wp.com/www.r-bloggers.com/wp-content/uploads/2020/07/RBloggers_feedburner_count_2020_07_01-e1593671704447.gif?w=578&#038;ssl=1" style="height:17px;min-width:80px;class:skip-lazy;" alt="" data-recalc-dims="1" /></noscript></a>
</div>

</div>

<br/>

<div>
<script type="2b35157d11c2ea52143dce53-text/javascript">
function init() {
var vidDefer = document.getElementsByTagName('iframe');
for (var i=0; i<vidDefer.length; i++) {
if(vidDefer[i].getAttribute('data-src')) {
vidDefer[i].setAttribute('src',vidDefer[i].getAttribute('data-src'));
} } }
window.onload = init;
</script>

<iframe allowtransparency="true" frameborder="0" scrolling="no"
src="" data-src="//platform.twitter.com/widgets/follow_button.html?screen_name=rbloggers&data-show-count"
  style="width:100%; height:30px;"></iframe>


<div id="fb-root"></div>
<script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v7.0&appId=124112670941750&autoLogAppEvents=1" nonce="RysU23SE" type="2b35157d11c2ea52143dce53-text/javascript"></script>

<div style="min-height: 154px;" class="fb-page" data-href="https://www.facebook.com/rbloggers/" data-tabs="" data-width="300" data-height="154" data-small-header="true" data-adapt-container-width="true" data-hide-cover="false" data-show-facepile="true"><blockquote cite="https://www.facebook.com/rbloggers/" class="fb-xfbml-parse-ignore"><a href="https://www.facebook.com/rbloggers/">R bloggers Facebook page</a></blockquote></div>



<!--
<iframe src="" data-src="//www.facebook.com/plugins/likebox.php?href=http%3A%2F%2Fwww.facebook.com%2Fpages%2FR-bloggers%2F191414254890&amp;width=300&amp;height=155&amp;show_faces=true&amp;colorscheme=light&amp;stream=false&amp;border_color&amp;header=false&amp;appId=400430016676958" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:100%; height:140px;" allowTransparency="true"></iframe>
-->


<!--
<br/>
<strong>If you are an R blogger yourself</strong> you are invited to <a href="https://www.r-bloggers.com/add-your-blog/">add your own R content feed to this site</a> (<strong>Non-English</strong> R bloggers should add themselves- <a href="https://www.r-bloggers.com/lang/add-your-blog">here</a>) -->

</div></div>
		</div><div id="wppp-3" class="sb-widget widget_wppp"><h4 class="widget-title">Most viewed posts (weekly)</h4>
<ul class='wppp_list'>
	<li><a href='https://www.r-bloggers.com/2021/08/mastering-git-and-github-the-hands-on-workshop/' title='Mastering Git and GitHub: the hands-on workshop'>Mastering Git and GitHub: the hands-on workshop</a></li>
	<li><a href='https://www.r-bloggers.com/2021/08/cheatsheet-updates/' title='Cheatsheet Updates'>Cheatsheet Updates</a></li>
	<li><a href='https://www.r-bloggers.com/2021/08/using-r-and-microsoft-sql-server-to-run-prediction-model-with-api-call/' title='Using R and Microsoft SQL Server to run prediction model with API call'>Using R and Microsoft SQL Server to run prediction model with API call</a></li>
	<li><a href='https://www.r-bloggers.com/2016/11/5-ways-to-subset-a-data-frame-in-r/' title='5 Ways to Subset a Data Frame in R'>5 Ways to Subset a Data Frame in R</a></li>
	<li><a href='https://www.r-bloggers.com/2013/08/date-formats-in-r/' title='Date Formats in R'>Date Formats in R</a></li>
	<li><a href='https://www.r-bloggers.com/2015/12/how-to-write-the-first-for-loop-in-r/' title='How to write the first for loop in R'>How to write the first for loop in R</a></li>
	<li><a href='https://www.r-bloggers.com/2021/08/feature-subsampling-for-random-forest-regression/' title='Feature Subsampling For  Random Forest Regression'>Feature Subsampling For  Random Forest Regression</a></li>
</ul>
</div><div id="text-18" class="sb-widget widget_text"><h4 class="widget-title">Sponsors</h4>			<div class="textwidget"><div style="min-height: 2055px;">

<script data-cfasync="false" type="text/javascript">
// https://support.cloudflare.com/hc/en-us/articles/200169436-How-can-I-have-Rocket-Loader-ignore-my-script-s-in-Automatic-Mode-
// this must be placed higher. Otherwise it doesn't work.
// data-cfasync="false" is for making sure cloudflares' rocketcache doesn't interfeare with this
// in this case it only works because it was used at the original script in the text widget


function createCookie(name,value,days) {
    var expires = "";
    if (days) {
        var date = new Date();
        date.setTime(date.getTime() + (days*24*60*60*1000));
        expires = "; expires=" + date.toUTCString();
    }
    document.cookie = name + "=" + value + expires + "; path=/";
}

function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

function eraseCookie(name) {
    createCookie(name,"",-1);
}

// no longer use async because of google
// async 
async function readTextFile(file)
{
	// Helps people browse between pages without the need to keep downloading the same 
	// ads txt page everytime. This way, it allows them to use their browser's cache.
	var random_number = readCookie("ad_random_number_cookie");
	if(random_number == null) {
		var random_number = Math.floor(Math.random()*100*(new Date().getTime()/10000000000));
		createCookie("ad_random_number_cookie",random_number,1)
	}
	
    file += '?t='+random_number;
    var rawFile = new XMLHttpRequest();
    rawFile.onreadystatechange = function ()
    {
        if(rawFile.readyState === 4)
        {
            if(rawFile.status === 200 || rawFile.status == 0)
            {
                // var allText = rawFile.responseText;
                // document.write(allText);
                document.write(rawFile.responseText);
            }
        }
    }
    rawFile.open("GET", file, false);
    rawFile.send(null);
}

// readTextFile('https://raw.githubusercontent.com/Raynos/file-store/master/temp.txt');

readTextFile("https://www.r-bloggers.com/wp-content/uploads/text-widget_anti-cache.txt");


</script>

</div></div>
		</div>
		<div id="recent-posts-3" class="sb-widget widget_recent_entries">
		<h4 class="widget-title">Recent Posts</h4>
		<ul>
											<li>
					<a href="https://www.r-bloggers.com/2021/08/earl-online-2021-dr-branka-subotic-keynote-speaker/">EARL Online 2021: Dr Branka Subotić, keynote speaker</a>
									</li>
											<li>
					<a href="https://www.r-bloggers.com/2021/08/introducing-iterative-nested-forecasting-with-modeltime/" aria-current="page">Introducing Iterative (Nested) Forecasting with Modeltime</a>
									</li>
											<li>
					<a href="https://www.r-bloggers.com/2021/08/a-lightweight-data-validation-ecosystem-with-r-github-and-slack/">A lightweight data validation ecosystem with R, GitHub, and Slack</a>
									</li>
											<li>
					<a href="https://www.r-bloggers.com/2021/08/how-to-remove-duplicates-in-r-with-example/">How to Remove Duplicates in R with Example</a>
									</li>
											<li>
					<a href="https://www.r-bloggers.com/2021/08/mastering-git-and-github-the-hands-on-workshop/">Mastering Git and GitHub: the hands-on workshop</a>
									</li>
											<li>
					<a href="https://www.r-bloggers.com/2021/08/new-bundesliga-forecasting-tool-can-underdog-herta-berlin-beat-bayern-munich/">New Bundesliga Forecasting Tool: Can Underdog Herta Berlin beat Bayern Munich?</a>
									</li>
											<li>
					<a href="https://www.r-bloggers.com/2021/08/appsilon-talks-at-the-2021-r-medicine-conference-focus-on-automation/">Appsilon Talks at the 2021 R/Medicine Conference: Focus on Automation</a>
									</li>
											<li>
					<a href="https://www.r-bloggers.com/2021/08/calculate-geometric-mean-in-r/">Calculate Geometric Mean in R</a>
									</li>
											<li>
					<a href="https://www.r-bloggers.com/2021/08/ggalt-make-a-lollipop-plot-to-compare-categories-in-ggplot2/">ggalt: Make a Lollipop Plot to Compare Categories in ggplot2</a>
									</li>
											<li>
					<a href="https://www.r-bloggers.com/2021/08/modeling-human-computer-interactions-on-star-trek-from-tidytuesday-with-workflowsets/">Modeling human/computer interactions on Star Trek from #TidyTuesday with workflowsets</a>
									</li>
											<li>
					<a href="https://www.r-bloggers.com/2021/08/securing-shinyproxy-with-caddy-server/">Securing ShinyProxy with Caddy Server</a>
									</li>
											<li>
					<a href="https://www.r-bloggers.com/2021/08/wildfires-comparison-with-ggplot2-dual-y-axis-and-forecasting-with-knn/">Wildfires Comparison with ggplot2 dual Y-axis and Forecasting with KNN</a>
									</li>
											<li>
					<a href="https://www.r-bloggers.com/2021/08/cheatsheet-updates/">Cheatsheet Updates</a>
									</li>
											<li>
					<a href="https://www.r-bloggers.com/2021/08/matrixstats-consistent-support-for-name-attributes-via-gsoc-project/">matrixStats: Consistent Support for Name Attributes via GSoC Project</a>
									</li>
											<li>
					<a href="https://www.r-bloggers.com/2021/08/test-for-randomness-in-r-how-to-check-dataset-randomness/">Test For Randomness in R-How to check Dataset Randomness</a>
									</li>
					</ul>

		</div><div id="rss-7" class="sb-widget widget_rss"><h4 class="widget-title"><a class="rsswidget" href="https://feeds.feedburner.com/Rjobs"><img class="rss-widget-icon" style="border:0" width="14" height="14" src="https://www.r-bloggers.com/wp-includes/images/rss.png" alt="RSS" /></a> <a class="rsswidget" href="https://www.r-users.com/">Jobs for R-users</a></h4><ul><li><a class='rsswidget' href="https://feedproxy.google.com/~r/RJobs/~3/XUqQfUzxziw/">Junior Data Scientist / Quantitative economist</a></li><li><a class='rsswidget' href="https://feedproxy.google.com/~r/RJobs/~3/C2KYkXtMCHw/">Senior Quantitative Analyst</a></li><li><a class='rsswidget' href="https://feedproxy.google.com/~r/RJobs/~3/z5mEr8qKkUI/">R programmer</a></li><li><a class='rsswidget' href="https://feedproxy.google.com/~r/RJobs/~3/wi3Gfi8GNqA/">Data Scientist – CGIAR Excellence in Agronomy (Ref No: DDG-R4D/DS/1/CG/EA/06/20)</a></li><li><a class='rsswidget' href="https://feedproxy.google.com/~r/RJobs/~3/aSK4JGQQOfg/">Data Analytics Auditor, Future of Audit Lead @ London or Newcastle</a></li></ul></div><div id="rss-9" class="sb-widget widget_rss"><h4 class="widget-title"><a class="rsswidget" href="https://feeds.feedburner.com/Python-bloggers"><img class="rss-widget-icon" style="border:0" width="14" height="14" src="https://www.r-bloggers.com/wp-includes/images/rss.png" alt="RSS" /></a> <a class="rsswidget" href="https://python-bloggers.com/">python-bloggers.com (python/data-science news)</a></h4><ul><li><a class='rsswidget' href="https://feedproxy.google.com/~r/Python-bloggers/~3/ixiT264Dbcc/">Using OpenCV to win Mobile games</a></li><li><a class='rsswidget' href="https://feedproxy.google.com/~r/Python-bloggers/~3/d566gba0umI/">Feature Subsampling For  Random Forest Regression</a></li><li><a class='rsswidget' href="https://feedproxy.google.com/~r/Python-bloggers/~3/zGZm-lTlxSg/">An Example of a Data Science Pipeline in Python on Bike Sharing Dataset</a></li><li><a class='rsswidget' href="https://feedproxy.google.com/~r/Python-bloggers/~3/jxOsOSpPvks/">Free workshop: Advancing into Analytics — Getting started</a></li><li><a class='rsswidget' href="https://feedproxy.google.com/~r/Python-bloggers/~3/UuEfhzUt4QI/">Your Python launch checklist</a></li><li><a class='rsswidget' href="https://feedproxy.google.com/~r/Python-bloggers/~3/uIQNhEWmDqY/">How to Train a BERT Model with SageMaker</a></li><li><a class='rsswidget' href="https://feedproxy.google.com/~r/Python-bloggers/~3/flWHJaQbyiE/">Welcome to my data meme page</a></li></ul></div><div id="text-16" class="sb-widget widget_text">			<div class="textwidget"><strong><a href="https://www.r-bloggers.com/blogs-list/">Full list of contributing R-bloggers</a></strong></div>
		</div><div id="archives-3" class="sb-widget widget_archive"><h4 class="widget-title">Archives</h4>		<label class="screen-reader-text" for="archives-dropdown-3">Archives</label>
		<select id="archives-dropdown-3" name="archive-dropdown">
			
			<option value="">Select Month</option>
				<option value='https://www.r-bloggers.com/2021/08/'> August 2021 &nbsp;(116)</option>
	<option value='https://www.r-bloggers.com/2021/07/'> July 2021 &nbsp;(164)</option>
	<option value='https://www.r-bloggers.com/2021/06/'> June 2021 &nbsp;(193)</option>
	<option value='https://www.r-bloggers.com/2021/05/'> May 2021 &nbsp;(194)</option>
	<option value='https://www.r-bloggers.com/2021/04/'> April 2021 &nbsp;(182)</option>
	<option value='https://www.r-bloggers.com/2021/03/'> March 2021 &nbsp;(215)</option>
	<option value='https://www.r-bloggers.com/2021/02/'> February 2021 &nbsp;(218)</option>
	<option value='https://www.r-bloggers.com/2021/01/'> January 2021 &nbsp;(242)</option>
	<option value='https://www.r-bloggers.com/2020/12/'> December 2020 &nbsp;(275)</option>
	<option value='https://www.r-bloggers.com/2020/11/'> November 2020 &nbsp;(252)</option>
	<option value='https://www.r-bloggers.com/2020/10/'> October 2020 &nbsp;(263)</option>
	<option value='https://www.r-bloggers.com/2020/09/'> September 2020 &nbsp;(237)</option>
	<option value='https://www.r-bloggers.com/2020/08/'> August 2020 &nbsp;(214)</option>
	<option value='https://www.r-bloggers.com/2020/07/'> July 2020 &nbsp;(258)</option>
	<option value='https://www.r-bloggers.com/2020/06/'> June 2020 &nbsp;(225)</option>
	<option value='https://www.r-bloggers.com/2020/05/'> May 2020 &nbsp;(323)</option>
	<option value='https://www.r-bloggers.com/2020/04/'> April 2020 &nbsp;(324)</option>
	<option value='https://www.r-bloggers.com/2020/03/'> March 2020 &nbsp;(279)</option>
	<option value='https://www.r-bloggers.com/2020/02/'> February 2020 &nbsp;(260)</option>
	<option value='https://www.r-bloggers.com/2020/01/'> January 2020 &nbsp;(253)</option>
	<option value='https://www.r-bloggers.com/2019/12/'> December 2019 &nbsp;(239)</option>
	<option value='https://www.r-bloggers.com/2019/11/'> November 2019 &nbsp;(219)</option>
	<option value='https://www.r-bloggers.com/2019/10/'> October 2019 &nbsp;(232)</option>
	<option value='https://www.r-bloggers.com/2019/09/'> September 2019 &nbsp;(233)</option>
	<option value='https://www.r-bloggers.com/2019/08/'> August 2019 &nbsp;(273)</option>
	<option value='https://www.r-bloggers.com/2019/07/'> July 2019 &nbsp;(260)</option>
	<option value='https://www.r-bloggers.com/2019/06/'> June 2019 &nbsp;(245)</option>
	<option value='https://www.r-bloggers.com/2019/05/'> May 2019 &nbsp;(277)</option>
	<option value='https://www.r-bloggers.com/2019/04/'> April 2019 &nbsp;(293)</option>
	<option value='https://www.r-bloggers.com/2019/03/'> March 2019 &nbsp;(308)</option>
	<option value='https://www.r-bloggers.com/2019/02/'> February 2019 &nbsp;(262)</option>
	<option value='https://www.r-bloggers.com/2019/01/'> January 2019 &nbsp;(287)</option>
	<option value='https://www.r-bloggers.com/2018/12/'> December 2018 &nbsp;(257)</option>
	<option value='https://www.r-bloggers.com/2018/11/'> November 2018 &nbsp;(289)</option>
	<option value='https://www.r-bloggers.com/2018/10/'> October 2018 &nbsp;(308)</option>
	<option value='https://www.r-bloggers.com/2018/09/'> September 2018 &nbsp;(291)</option>
	<option value='https://www.r-bloggers.com/2018/08/'> August 2018 &nbsp;(270)</option>
	<option value='https://www.r-bloggers.com/2018/07/'> July 2018 &nbsp;(333)</option>
	<option value='https://www.r-bloggers.com/2018/06/'> June 2018 &nbsp;(298)</option>
	<option value='https://www.r-bloggers.com/2018/05/'> May 2018 &nbsp;(321)</option>
	<option value='https://www.r-bloggers.com/2018/04/'> April 2018 &nbsp;(301)</option>
	<option value='https://www.r-bloggers.com/2018/03/'> March 2018 &nbsp;(291)</option>
	<option value='https://www.r-bloggers.com/2018/02/'> February 2018 &nbsp;(241)</option>
	<option value='https://www.r-bloggers.com/2018/01/'> January 2018 &nbsp;(330)</option>
	<option value='https://www.r-bloggers.com/2017/12/'> December 2017 &nbsp;(261)</option>
	<option value='https://www.r-bloggers.com/2017/11/'> November 2017 &nbsp;(270)</option>
	<option value='https://www.r-bloggers.com/2017/10/'> October 2017 &nbsp;(290)</option>
	<option value='https://www.r-bloggers.com/2017/09/'> September 2017 &nbsp;(294)</option>
	<option value='https://www.r-bloggers.com/2017/08/'> August 2017 &nbsp;(340)</option>
	<option value='https://www.r-bloggers.com/2017/07/'> July 2017 &nbsp;(283)</option>
	<option value='https://www.r-bloggers.com/2017/06/'> June 2017 &nbsp;(317)</option>
	<option value='https://www.r-bloggers.com/2017/05/'> May 2017 &nbsp;(349)</option>
	<option value='https://www.r-bloggers.com/2017/04/'> April 2017 &nbsp;(324)</option>
	<option value='https://www.r-bloggers.com/2017/03/'> March 2017 &nbsp;(365)</option>
	<option value='https://www.r-bloggers.com/2017/02/'> February 2017 &nbsp;(317)</option>
	<option value='https://www.r-bloggers.com/2017/01/'> January 2017 &nbsp;(367)</option>
	<option value='https://www.r-bloggers.com/2016/12/'> December 2016 &nbsp;(347)</option>
	<option value='https://www.r-bloggers.com/2016/11/'> November 2016 &nbsp;(294)</option>
	<option value='https://www.r-bloggers.com/2016/10/'> October 2016 &nbsp;(306)</option>
	<option value='https://www.r-bloggers.com/2016/09/'> September 2016 &nbsp;(254)</option>
	<option value='https://www.r-bloggers.com/2016/08/'> August 2016 &nbsp;(287)</option>
	<option value='https://www.r-bloggers.com/2016/07/'> July 2016 &nbsp;(327)</option>
	<option value='https://www.r-bloggers.com/2016/06/'> June 2016 &nbsp;(263)</option>
	<option value='https://www.r-bloggers.com/2016/05/'> May 2016 &nbsp;(292)</option>
	<option value='https://www.r-bloggers.com/2016/04/'> April 2016 &nbsp;(260)</option>
	<option value='https://www.r-bloggers.com/2016/03/'> March 2016 &nbsp;(302)</option>
	<option value='https://www.r-bloggers.com/2016/02/'> February 2016 &nbsp;(268)</option>
	<option value='https://www.r-bloggers.com/2016/01/'> January 2016 &nbsp;(337)</option>
	<option value='https://www.r-bloggers.com/2015/12/'> December 2015 &nbsp;(304)</option>
	<option value='https://www.r-bloggers.com/2015/11/'> November 2015 &nbsp;(234)</option>
	<option value='https://www.r-bloggers.com/2015/10/'> October 2015 &nbsp;(259)</option>
	<option value='https://www.r-bloggers.com/2015/09/'> September 2015 &nbsp;(238)</option>
	<option value='https://www.r-bloggers.com/2015/08/'> August 2015 &nbsp;(264)</option>
	<option value='https://www.r-bloggers.com/2015/07/'> July 2015 &nbsp;(243)</option>
	<option value='https://www.r-bloggers.com/2015/06/'> June 2015 &nbsp;(213)</option>
	<option value='https://www.r-bloggers.com/2015/05/'> May 2015 &nbsp;(235)</option>
	<option value='https://www.r-bloggers.com/2015/04/'> April 2015 &nbsp;(211)</option>
	<option value='https://www.r-bloggers.com/2015/03/'> March 2015 &nbsp;(259)</option>
	<option value='https://www.r-bloggers.com/2015/02/'> February 2015 &nbsp;(212)</option>
	<option value='https://www.r-bloggers.com/2015/01/'> January 2015 &nbsp;(245)</option>
	<option value='https://www.r-bloggers.com/2014/12/'> December 2014 &nbsp;(236)</option>
	<option value='https://www.r-bloggers.com/2014/11/'> November 2014 &nbsp;(221)</option>
	<option value='https://www.r-bloggers.com/2014/10/'> October 2014 &nbsp;(218)</option>
	<option value='https://www.r-bloggers.com/2014/09/'> September 2014 &nbsp;(259)</option>
	<option value='https://www.r-bloggers.com/2014/08/'> August 2014 &nbsp;(217)</option>
	<option value='https://www.r-bloggers.com/2014/07/'> July 2014 &nbsp;(235)</option>
	<option value='https://www.r-bloggers.com/2014/06/'> June 2014 &nbsp;(241)</option>
	<option value='https://www.r-bloggers.com/2014/05/'> May 2014 &nbsp;(243)</option>
	<option value='https://www.r-bloggers.com/2014/04/'> April 2014 &nbsp;(260)</option>
	<option value='https://www.r-bloggers.com/2014/03/'> March 2014 &nbsp;(289)</option>
	<option value='https://www.r-bloggers.com/2014/02/'> February 2014 &nbsp;(269)</option>
	<option value='https://www.r-bloggers.com/2014/01/'> January 2014 &nbsp;(263)</option>
	<option value='https://www.r-bloggers.com/2013/12/'> December 2013 &nbsp;(264)</option>
	<option value='https://www.r-bloggers.com/2013/11/'> November 2013 &nbsp;(241)</option>
	<option value='https://www.r-bloggers.com/2013/10/'> October 2013 &nbsp;(234)</option>
	<option value='https://www.r-bloggers.com/2013/09/'> September 2013 &nbsp;(215)</option>
	<option value='https://www.r-bloggers.com/2013/08/'> August 2013 &nbsp;(223)</option>
	<option value='https://www.r-bloggers.com/2013/07/'> July 2013 &nbsp;(254)</option>
	<option value='https://www.r-bloggers.com/2013/06/'> June 2013 &nbsp;(272)</option>
	<option value='https://www.r-bloggers.com/2013/05/'> May 2013 &nbsp;(260)</option>
	<option value='https://www.r-bloggers.com/2013/04/'> April 2013 &nbsp;(279)</option>
	<option value='https://www.r-bloggers.com/2013/03/'> March 2013 &nbsp;(277)</option>
	<option value='https://www.r-bloggers.com/2013/02/'> February 2013 &nbsp;(294)</option>
	<option value='https://www.r-bloggers.com/2013/01/'> January 2013 &nbsp;(343)</option>
	<option value='https://www.r-bloggers.com/2012/12/'> December 2012 &nbsp;(308)</option>
	<option value='https://www.r-bloggers.com/2012/11/'> November 2012 &nbsp;(277)</option>
	<option value='https://www.r-bloggers.com/2012/10/'> October 2012 &nbsp;(308)</option>
	<option value='https://www.r-bloggers.com/2012/09/'> September 2012 &nbsp;(270)</option>
	<option value='https://www.r-bloggers.com/2012/08/'> August 2012 &nbsp;(263)</option>
	<option value='https://www.r-bloggers.com/2012/07/'> July 2012 &nbsp;(247)</option>
	<option value='https://www.r-bloggers.com/2012/06/'> June 2012 &nbsp;(298)</option>
	<option value='https://www.r-bloggers.com/2012/05/'> May 2012 &nbsp;(287)</option>
	<option value='https://www.r-bloggers.com/2012/04/'> April 2012 &nbsp;(295)</option>
	<option value='https://www.r-bloggers.com/2012/03/'> March 2012 &nbsp;(304)</option>
	<option value='https://www.r-bloggers.com/2012/02/'> February 2012 &nbsp;(264)</option>
	<option value='https://www.r-bloggers.com/2012/01/'> January 2012 &nbsp;(280)</option>
	<option value='https://www.r-bloggers.com/2011/12/'> December 2011 &nbsp;(251)</option>
	<option value='https://www.r-bloggers.com/2011/11/'> November 2011 &nbsp;(261)</option>
	<option value='https://www.r-bloggers.com/2011/10/'> October 2011 &nbsp;(281)</option>
	<option value='https://www.r-bloggers.com/2011/09/'> September 2011 &nbsp;(187)</option>
	<option value='https://www.r-bloggers.com/2011/08/'> August 2011 &nbsp;(258)</option>
	<option value='https://www.r-bloggers.com/2011/07/'> July 2011 &nbsp;(219)</option>
	<option value='https://www.r-bloggers.com/2011/06/'> June 2011 &nbsp;(225)</option>
	<option value='https://www.r-bloggers.com/2011/05/'> May 2011 &nbsp;(239)</option>
	<option value='https://www.r-bloggers.com/2011/04/'> April 2011 &nbsp;(268)</option>
	<option value='https://www.r-bloggers.com/2011/03/'> March 2011 &nbsp;(249)</option>
	<option value='https://www.r-bloggers.com/2011/02/'> February 2011 &nbsp;(205)</option>
	<option value='https://www.r-bloggers.com/2011/01/'> January 2011 &nbsp;(209)</option>
	<option value='https://www.r-bloggers.com/2010/12/'> December 2010 &nbsp;(188)</option>
	<option value='https://www.r-bloggers.com/2010/11/'> November 2010 &nbsp;(172)</option>
	<option value='https://www.r-bloggers.com/2010/10/'> October 2010 &nbsp;(219)</option>
	<option value='https://www.r-bloggers.com/2010/09/'> September 2010 &nbsp;(185)</option>
	<option value='https://www.r-bloggers.com/2010/08/'> August 2010 &nbsp;(203)</option>
	<option value='https://www.r-bloggers.com/2010/07/'> July 2010 &nbsp;(175)</option>
	<option value='https://www.r-bloggers.com/2010/06/'> June 2010 &nbsp;(167)</option>
	<option value='https://www.r-bloggers.com/2010/05/'> May 2010 &nbsp;(164)</option>
	<option value='https://www.r-bloggers.com/2010/04/'> April 2010 &nbsp;(152)</option>
	<option value='https://www.r-bloggers.com/2010/03/'> March 2010 &nbsp;(165)</option>
	<option value='https://www.r-bloggers.com/2010/02/'> February 2010 &nbsp;(135)</option>
	<option value='https://www.r-bloggers.com/2010/01/'> January 2010 &nbsp;(121)</option>
	<option value='https://www.r-bloggers.com/2009/12/'> December 2009 &nbsp;(126)</option>
	<option value='https://www.r-bloggers.com/2009/11/'> November 2009 &nbsp;(66)</option>
	<option value='https://www.r-bloggers.com/2009/10/'> October 2009 &nbsp;(87)</option>
	<option value='https://www.r-bloggers.com/2009/09/'> September 2009 &nbsp;(65)</option>
	<option value='https://www.r-bloggers.com/2009/08/'> August 2009 &nbsp;(56)</option>
	<option value='https://www.r-bloggers.com/2009/07/'> July 2009 &nbsp;(64)</option>
	<option value='https://www.r-bloggers.com/2009/06/'> June 2009 &nbsp;(54)</option>
	<option value='https://www.r-bloggers.com/2009/05/'> May 2009 &nbsp;(35)</option>
	<option value='https://www.r-bloggers.com/2009/04/'> April 2009 &nbsp;(38)</option>
	<option value='https://www.r-bloggers.com/2009/03/'> March 2009 &nbsp;(40)</option>
	<option value='https://www.r-bloggers.com/2009/02/'> February 2009 &nbsp;(33)</option>
	<option value='https://www.r-bloggers.com/2009/01/'> January 2009 &nbsp;(42)</option>
	<option value='https://www.r-bloggers.com/2008/12/'> December 2008 &nbsp;(16)</option>
	<option value='https://www.r-bloggers.com/2008/11/'> November 2008 &nbsp;(14)</option>
	<option value='https://www.r-bloggers.com/2008/10/'> October 2008 &nbsp;(10)</option>
	<option value='https://www.r-bloggers.com/2008/09/'> September 2008 &nbsp;(8)</option>
	<option value='https://www.r-bloggers.com/2008/08/'> August 2008 &nbsp;(11)</option>
	<option value='https://www.r-bloggers.com/2008/07/'> July 2008 &nbsp;(7)</option>
	<option value='https://www.r-bloggers.com/2008/06/'> June 2008 &nbsp;(8)</option>
	<option value='https://www.r-bloggers.com/2008/05/'> May 2008 &nbsp;(8)</option>
	<option value='https://www.r-bloggers.com/2008/04/'> April 2008 &nbsp;(4)</option>
	<option value='https://www.r-bloggers.com/2008/03/'> March 2008 &nbsp;(5)</option>
	<option value='https://www.r-bloggers.com/2008/02/'> February 2008 &nbsp;(6)</option>
	<option value='https://www.r-bloggers.com/2008/01/'> January 2008 &nbsp;(10)</option>
	<option value='https://www.r-bloggers.com/2007/12/'> December 2007 &nbsp;(3)</option>
	<option value='https://www.r-bloggers.com/2007/11/'> November 2007 &nbsp;(5)</option>
	<option value='https://www.r-bloggers.com/2007/10/'> October 2007 &nbsp;(9)</option>
	<option value='https://www.r-bloggers.com/2007/09/'> September 2007 &nbsp;(7)</option>
	<option value='https://www.r-bloggers.com/2007/08/'> August 2007 &nbsp;(21)</option>
	<option value='https://www.r-bloggers.com/2007/07/'> July 2007 &nbsp;(9)</option>
	<option value='https://www.r-bloggers.com/2007/06/'> June 2007 &nbsp;(3)</option>
	<option value='https://www.r-bloggers.com/2007/05/'> May 2007 &nbsp;(3)</option>
	<option value='https://www.r-bloggers.com/2007/04/'> April 2007 &nbsp;(1)</option>
	<option value='https://www.r-bloggers.com/2007/03/'> March 2007 &nbsp;(5)</option>
	<option value='https://www.r-bloggers.com/2007/02/'> February 2007 &nbsp;(4)</option>
	<option value='https://www.r-bloggers.com/2006/11/'> November 2006 &nbsp;(1)</option>
	<option value='https://www.r-bloggers.com/2006/10/'> October 2006 &nbsp;(2)</option>
	<option value='https://www.r-bloggers.com/2006/08/'> August 2006 &nbsp;(3)</option>
	<option value='https://www.r-bloggers.com/2006/07/'> July 2006 &nbsp;(1)</option>
	<option value='https://www.r-bloggers.com/2006/06/'> June 2006 &nbsp;(1)</option>
	<option value='https://www.r-bloggers.com/2006/05/'> May 2006 &nbsp;(3)</option>
	<option value='https://www.r-bloggers.com/2006/04/'> April 2006 &nbsp;(1)</option>
	<option value='https://www.r-bloggers.com/2006/03/'> March 2006 &nbsp;(1)</option>
	<option value='https://www.r-bloggers.com/2006/02/'> February 2006 &nbsp;(5)</option>
	<option value='https://www.r-bloggers.com/2006/01/'> January 2006 &nbsp;(1)</option>
	<option value='https://www.r-bloggers.com/2005/10/'> October 2005 &nbsp;(1)</option>
	<option value='https://www.r-bloggers.com/2005/09/'> September 2005 &nbsp;(3)</option>
	<option value='https://www.r-bloggers.com/2005/05/'> May 2005 &nbsp;(1)</option>

		</select>

<script type="2b35157d11c2ea52143dce53-text/javascript">
/* <![CDATA[ */
(function() {
	var dropdown = document.getElementById( "archives-dropdown-3" );
	function onSelectChange() {
		if ( dropdown.options[ dropdown.selectedIndex ].value !== '' ) {
			document.location.href = this.options[ this.selectedIndex ].value;
		}
	}
	dropdown.onchange = onSelectChange;
})();
/* ]]> */
</script>
			</div><div id="linkcat-3349" class="sb-widget widget_links"><h4 class="widget-title">Other sites</h4>
	<ul class='xoxo blogroll'>
<li><a href="http://www.proc-x.com/" title="SAS news gathered from bloggers">SAS blogs</a></li>
<li><a href="https://www.r-users.com/">Jobs for R-users</a></li>

	</ul>
</div>
</aside></div>
</div>
<div class="copyright-wrap">
	<p class="copyright">Copyright &copy; 2021 | <a href="https://www.mhthemes.com/" rel="nofollow">MH Corporate basic by MH Themes</a></p>
</div>
</div>

<!--
TPC! Memory Usage (http://webjawns.com)
Memory Usage: 22492352Memory Peak Usage: 22659456WP Memory Limit: 820MPHP Memory Limit: 128MCheckpoints: 9-->


<!-- Schema & Structured Data For WP v1.9.82.1 - -->
<script type="application/ld+json" class="saswp-schema-markup-output">
[{"@context":"https:\/\/schema.org","@graph":[{"@type":"Organization","@id":"https:\/\/www.r-bloggers.com#Organization","name":"R-bloggers","url":"https:\/\/www.r-bloggers.com","sameAs":[],"logo":{"@type":"ImageObject","url":"http:\/\/www.r-bloggers.com\/wp-content\/uploads\/2021\/05\/R_blogger_logo1_large.png","width":"1285","height":"369"},"contactPoint":{"@type":"ContactPoint","contactType":"technical support","telephone":"","url":"https:\/\/www.r-bloggers.com\/contact-us\/"}},{"@type":"WebSite","@id":"https:\/\/www.r-bloggers.com#website","headline":"R-bloggers","name":"R-bloggers","description":"R news and tutorials contributed by hundreds of R bloggers","url":"https:\/\/www.r-bloggers.com","potentialAction":{"@type":"SearchAction","target":"https:\/\/www.r-bloggers.com\/?s={search_term_string}","query-input":"required name=search_term_string"},"publisher":{"@id":"https:\/\/www.r-bloggers.com#Organization"}},{"@context":"https:\/\/schema.org","@type":"WebPage","@id":"https:\/\/www.r-bloggers.com\/2021\/08\/introducing-iterative-nested-forecasting-with-modeltime\/#webpage","name":"Introducing Iterative (Nested) Forecasting with Modeltime","url":"https:\/\/www.r-bloggers.com\/2021\/08\/introducing-iterative-nested-forecasting-with-modeltime\/","lastReviewed":"2021-08-26T00:01:01-06:00","inLanguage":"en-US","description":"Iteratively forecast with tidyverse nested modeling\n\n\nWhy is nested forecasting important? For starters, the ability to iteratively forecast time series with many models that are trained on many individual groups has been a huge request from student...","reviewedBy":{"@type":"Organization","name":"R-bloggers","url":"https:\/\/www.r-bloggers.com","logo":{"@type":"ImageObject","url":"http:\/\/www.r-bloggers.com\/wp-content\/uploads\/2021\/05\/R_blogger_logo1_large.png","width":"1285","height":"369"}},"primaryImageOfPage":{"@id":"https:\/\/www.r-bloggers.com\/2021\/08\/introducing-iterative-nested-forecasting-with-modeltime\/#primaryimage"},"mainContentOfPage":[[{"@context":"https:\/\/schema.org","@type":"SiteNavigationElement","@id":"https:\/\/www.r-bloggers.com\/#top nav","name":"Home","url":"https:\/\/www.r-bloggers.com"},{"@context":"https:\/\/schema.org","@type":"SiteNavigationElement","@id":"https:\/\/www.r-bloggers.com\/#top nav","name":"About","url":"http:\/\/www.r-bloggers.com\/about\/"},{"@context":"https:\/\/schema.org","@type":"SiteNavigationElement","@id":"https:\/\/www.r-bloggers.com\/#top nav","name":"RSS","url":"https:\/\/feeds.feedburner.com\/RBloggers"},{"@context":"https:\/\/schema.org","@type":"SiteNavigationElement","@id":"https:\/\/www.r-bloggers.com\/#top nav","name":"add your blog!","url":"http:\/\/www.r-bloggers.com\/add-your-blog\/"},{"@context":"https:\/\/schema.org","@type":"SiteNavigationElement","@id":"https:\/\/www.r-bloggers.com\/#top nav","name":"Learn R","url":"https:\/\/www.r-bloggers.com\/how-to-learn-r-2\/"},{"@context":"https:\/\/schema.org","@type":"SiteNavigationElement","@id":"https:\/\/www.r-bloggers.com\/#top nav","name":"R jobs","url":"https:\/\/www.r-users.com\/"},{"@context":"https:\/\/schema.org","@type":"SiteNavigationElement","@id":"https:\/\/www.r-bloggers.com\/#top nav","name":"Submit a new job (it's free)","url":"https:\/\/www.r-users.com\/submit-job\/"},{"@context":"https:\/\/schema.org","@type":"SiteNavigationElement","@id":"https:\/\/www.r-bloggers.com\/#top nav","name":"Browse latest jobs (also free)","url":"https:\/\/www.r-users.com\/"},{"@context":"https:\/\/schema.org","@type":"SiteNavigationElement","@id":"https:\/\/www.r-bloggers.com\/#top nav","name":"Contact us","url":"http:\/\/www.r-bloggers.com\/contact-us\/"}]],"isPartOf":{"@id":"https:\/\/www.r-bloggers.com#website"},"breadcrumb":{"@id":"https:\/\/www.r-bloggers.com\/2021\/08\/introducing-iterative-nested-forecasting-with-modeltime\/#breadcrumb"}},{"@type":"BreadcrumbList","@id":"https:\/\/www.r-bloggers.com\/2021\/08\/introducing-iterative-nested-forecasting-with-modeltime\/#breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https:\/\/www.r-bloggers.com","name":"R-bloggers"}},{"@type":"ListItem","position":2,"item":{"@id":"https:\/\/www.r-bloggers.com\/category\/r-bloggers\/","name":"R bloggers"}},{"@type":"ListItem","position":3,"item":{"@id":"https:\/\/www.r-bloggers.com\/2021\/08\/introducing-iterative-nested-forecasting-with-modeltime\/","name":"Introducing Iterative (Nested) Forecasting with Modeltime"}}]},{"@type":"Article","@id":"https:\/\/www.r-bloggers.com\/2021\/08\/introducing-iterative-nested-forecasting-with-modeltime\/#Article","url":"https:\/\/www.r-bloggers.com\/2021\/08\/introducing-iterative-nested-forecasting-with-modeltime\/","inLanguage":"en-US","mainEntityOfPage":"https:\/\/www.r-bloggers.com\/2021\/08\/introducing-iterative-nested-forecasting-with-modeltime\/#webpage","headline":"Introducing Iterative (Nested) Forecasting with Modeltime","description":"Iteratively forecast with tidyverse nested modeling\n\n\nWhy is nested forecasting important? For starters, the ability to iteratively forecast time series with many models that are trained on many individual groups has been a huge request from student...","articleBody":"Iteratively forecast with tidyverse nested modeling   Why is nested forecasting important? For starters, the ability to iteratively forecast time series with many models that are trained on many individual groups has been a huge request from students in our Time Series Course.              Two methods exist for forecasting many time series that get results:          Global Modeling: Best for scalability using a Global Models and Panel Data structure. See Forecasting with Global Models.           Iterative Forecasting: Best for accuracy using a Nested Data Structure. Takes longer than global model (more resources due to for-loop iteration), but can yield great results. (Discussed Here)      We\u2019ve incorporated a new approach called \u201cNested Forecasting\u201d to help perform Iterative Forecasting. In this tutorial, we\u2019ll forecast iteratively usingprophet and XGBoost models.   Before we move on, what if I want to learn more in-depth forecasting training with Modeltime? \ud83d\udc47  Free Forecasting Training!  I can\u2019t possibly go over all of the NEW modeltime Nested Forecasting features in this tutorial. If you would like to learn more about Nested Forecasting, I\u2019m hosting a FREE live webinar on on Thursday, September 9th at 2PM EST. I\u2019ll cover:     Nested Forecasting using a Real-World Example   NEW High-Performance Algorithms (thief, smooth) designed for Nested Forecasting   NEW Parallel Processing to speed up Nested Forecasting   And, a lot of &lt;\/code&gt;    \ud83d\udc49 Register Here.    Before we get started, install modeltime  The new nested forecasting is only available in the development version of modeltime. We will be releasing to CRAN soon.  For now, you can install with:  remotes::install_github(\"business-science\/modeltime\", dependencies  TRUE)  What is Modeltime? A growing ecosystem for tidymodels forecasting              Modeltime is part of a growing ecosystem of forecasting packages. Modeltime integrates tidymodels for forecasting at scale. The ecosystem contains:          Modeltime (Machine Learning, Forecasting Workflow)           Modeltime H2O (AutoML)           Modeltime GluonTS (Deep Learning)           Modeltime Ensemble (Blending Forecasts)           Modeltime Resample (Backtesting)           Timetk (Data Transformation, Feature Engineering, Time Series Visualization)      And several new community-contributed modeltime extension packages have emerged including: boostime, bayesmodels, garchmodels, and sknifedatar  What is Nested Forecasting?  Nested forecasting is a new feature in modeltime. The core idea of nested forecasting is to convert a dataset containing many time series groups into a nested data set, then fit many models to each of the nested data sets. The result is an iterative forecasting process that generates Nested Modeltime Tables with all of the forecast attributes needed to make decisions.    Important Concepts: Logging &amp; Attributes  A new feature to nested forecasting workflow is logged attributes, which is very useful in complex workflows where loops (iteration) is performed. In a Nested Modeltime Table, we push as many operations as possible into the fitting and refitting stages, logging important aspects including:     Test Accuracy: extract_nested_test_accuracy()   Test Forecast: extract_nested_test_forecast()   Error Reports: extract_nested_error_report()   Best Models: extract_nested_best_model_report()   Future Forecasts: extract_nested_future_forecast()   While this deviates from the traditional Modeltime Workflow, we find that logging vastly speeds up experimentation and information retrieval especially when the number of time series increases.    Getting Started  We\u2019ll go through a short tutorial on Nested Forecasting. The first thing to do is to load the following libraries:  library(tidymodels) library(modeltime) library(tidyverse) library(timetk)  Dataset  Next, let\u2019s use the walmart_sales_weekly dataset that comes with timetk.  data_tbl &lt;- walmart_sales_weekly %&gt;%     select(id, Date, Weekly_Sales) %&gt;%     set_names(c(\"id\", \"date\", \"value\"))  data_tbl  ## # A tibble: 1,001 \u00d7 3 ##    id    date        value ##    &lt;fct&gt; &lt;date&gt;      &lt;dbl&gt; ##  1 1_1   2010-02-05 24924. ##  2 1_1   2010-02-12 46039. ##  3 1_1   2010-02-19 41596. ##  4 1_1   2010-02-26 19404. ##  5 1_1   2010-03-05 21828. ##  6 1_1   2010-03-12 21043. ##  7 1_1   2010-03-19 22137. ##  8 1_1   2010-03-26 26229. ##  9 1_1   2010-04-02 57258. ## 10 1_1   2010-04-09 42961. ## # \u2026 with 991 more rows  The problem with this dataset is that it\u2019s set up for panel data modeling.  The important columns are:          \u201cid\u201d: This separates the time series groups (in this case these represent sales from departments in a walmart store)           \u201cdate\u201d: This is the weekly sales period           \u201cvalue\u201d: This is the value for sales during the week and store\/department      We can visualize the sales data by time series group (department ID) to expose the differences in sales by department.  data_tbl %&gt;%   group_by(id) %&gt;%   plot_time_series(     date, value, .interactive  F, .facet_ncol  2   )    We can clearly see that there are 7 time series groups (store departments) with different weekly sales patterns.  Nested Forecasting Preparation  There are two key components that we need to prepare for:          Nested Data Structure: Most critical to ensure your data is prepared (covered next)           Nested Modeltime Workflow: This stage is where we create many models, fit the models to the data, and generate forecasts at scale      Conceptually, the workflow looks like this where we combine nested data and tidymodels workflows using an upcoming function, modeltime_nested_fit().    Data Preparation (Nesting)  The most critical stage in \u201cNested Forecasting\u201d is data preparation, making sure that the input to the nested forecasting workflow is in the appropriate structure. We\u2019ve included several functions to help that involve a bit of forethought that can be broken into 3 steps:          Extending each of the times series: How far into the future do you need to predict for each time series? See extend_timeseries().           Nesting by the grouping variable: This is where you create the nested structure. You\u2019ll identify the ID column that separates each time series, and the number of timestamps to include in the \u201c.future_data\u201d and optionally \u201c.actual_data\u201d. Typically, you\u2019ll select the same .length_future as your extension from the previous step. See nest_timeseries().           Train\/Test Set Splitting: Finally, you\u2019ll take your .actual_data and convert into train\/test splits that can be used for accuracy and confidence interval estimation. See split_nested_timeseries().      Here are the 3-steps in action:  nested_data_tbl &lt;- data_tbl %&gt;%          # 1. Extending: We'll predict 52 weeks into the future.     extend_timeseries(         .id_var         id,         .date_var       date,         .length_future  52     ) %&gt;%          # 2. Nesting: We'll group by id, and create a future dataset     #    that forecasts 52 weeks of extended data and     #    an actual dataset that contains 104 weeks (2-years of data)     nest_timeseries(         .id_var         id,         .length_future  52,         .length_actual  52*2     ) %&gt;%         # 3. Splitting: We'll take the actual data and create splits    #    for accuracy and confidence interval estimation of 52 weeks (test)    #    and the rest is training data     split_nested_timeseries(         .length_test  52     )  nested_data_tbl  ## # A tibble: 7 \u00d7 4 ##   id    .actual_data       .future_data      .splits         ##   &lt;fct&gt; &lt;list&gt;             &lt;list&gt;            &lt;list&gt;          ## 1 1_1   &lt;tibble &gt; &lt;tibble &gt; &lt;split &gt; ## 2 1_3   &lt;tibble &gt; &lt;tibble &gt; &lt;split &gt; ## 3 1_8   &lt;tibble &gt; &lt;tibble &gt; &lt;split &gt; ## 4 1_13  &lt;tibble &gt; &lt;tibble &gt; &lt;split &gt; ## 5 1_38  &lt;tibble &gt; &lt;tibble &gt; &lt;split &gt; ## 6 1_93  &lt;tibble &gt; &lt;tibble &gt; &lt;split &gt; ## 7 1_95  &lt;tibble &gt; &lt;tibble &gt; &lt;split &gt;  This creates a nested tibble with \u201c.actual_data\u201d, \u201c.future_data\u201d, and \u201c.splits\u201d. Each column will help in the nested modeltime workflow.  Nested Modeltime Workflow  Next, we move into the Nested Modeltime Workflow now that nested data has been created. The Nested Modeltime Workflow includes 3 core functions:          Modeling Fitting: This is the training stage where we fit to training data. The test forecast is generated from this step. See modeltime_nested_fit().           Model Evaluation and Selection: This is where we review model performance and select the best model by minimizing or maximizing an error metric. See modeltime_nested_select_best().           Model Refitting: This is the final fitting stage where we fit to actual data. The future forecast is generated from this step. See modeltime_nested_refit().        Step 1: Create Tidymodels Workflows  First, we create tidymodels workflows for the various models that you intend to create.  Prophet  A common modeling method is prophet, that can be created using prophet_reg(). We\u2019ll create a workflow. Note that we use the first nested_data_tbl$.splits]) to help us determine how to build features.  rec_prophet &lt;- recipe(value ~ date, training(nested_data_tbl$.splits]))   wflw_prophet &lt;- workflow() %&gt;%     add_model(       prophet_reg(\"regression\", seasonality_yearly  TRUE) %&gt;%          set_engine(\"prophet\")     ) %&gt;%     add_recipe(rec_prophet)  XGBoost  Next, we can use a machine learning method that can get good results: XGBoost. We will add a few extra features in the recipe feature engineering step to generate features that tend to get better modeling results. Note that we use the first nested_data_tbl$.splits]) to help us determine how to build features.  rec_xgb &lt;- recipe(value ~ ., training(nested_data_tbl$.splits])) %&gt;%     step_timeseries_signature(date) %&gt;%     step_rm(date) %&gt;%     step_zv(all_predictors()) %&gt;%     step_dummy(all_nominal_predictors(), one_hot  TRUE)  wflw_xgb &lt;- workflow() %&gt;%     add_model(boost_tree(\"regression\") %&gt;% set_engine(\"xgboost\")) %&gt;%     add_recipe(rec_xgb)  Step 2: Nested Modeltime Tables  With a couple of modeling workflows in hand, we are now ready to test them on each of the time series. We start by using the modeltime_nested_fit() function, which iteratively fits each model to each of the nested time series train\/test \u201c.splits\u201d column.  nested_modeltime_tbl &lt;- modeltime_nested_fit(   # Nested data    nested_data  nested_data_tbl,      # Add workflows   wflw_prophet,   wflw_xgb )  nested_modeltime_tbl  ## # Nested Modeltime Table ## # Trained on: .splits | Model Errors:  ## # A tibble: 7 \u00d7 5 ##   id    .actual_data       .future_data     .splits        .modeltime_tables     ##   &lt;fct&gt; &lt;list&gt;             &lt;list&gt;           &lt;list&gt;         &lt;list&gt;                ## 1 1_1   &lt;tibble &gt; &lt;tibble [52 \u00d7 2\u2026 &lt;split [52\/52\u2026 &lt;mdl_time_tbl [2 \u00d7 5\u2026 ## 2 1_3   &lt;tibble &gt; &lt;tibble [52 \u00d7 2\u2026 &lt;split [52\/52\u2026 &lt;mdl_time_tbl [2 \u00d7 5\u2026 ## 3 1_8   &lt;tibble &gt; &lt;tibble [52 \u00d7 2\u2026 &lt;split [52\/52\u2026 &lt;mdl_time_tbl [2 \u00d7 5\u2026 ## 4 1_13  &lt;tibble &gt; &lt;tibble [52 \u00d7 2\u2026 &lt;split [52\/52\u2026 &lt;mdl_time_tbl [2 \u00d7 5\u2026 ## 5 1_38  &lt;tibble &gt; &lt;tibble [52 \u00d7 2\u2026 &lt;split [52\/52\u2026 &lt;mdl_time_tbl [2 \u00d7 5\u2026 ## 6 1_93  &lt;tibble &gt; &lt;tibble [52 \u00d7 2\u2026 &lt;split [52\/52\u2026 &lt;mdl_time_tbl [2 \u00d7 5\u2026 ## 7 1_95  &lt;tibble &gt; &lt;tibble [52 \u00d7 2\u2026 &lt;split [52\/52\u2026 &lt;mdl_time_tbl [2 \u00d7 5\u2026  This adds a new column with .modeltime_tables for each of the data sets and has created several logged attributes that are part of the \u201cNested Modeltime Table\u201d. We also can see that the models were trained on \u201c.splits\u201d and none of the models had any errors.  Step 3: Logged Attributes  During the forecasting, the iterative modeltime fitting process logs important information that enable us to evaluate the models. These logged attributes are accessable with \u201cextract\u201d functions.  Extract Nested Test Accuracy  Using the extract_nested_test_accuracy(), we can get the accuracy measures by time series and model. This allows us to see which model performs best on which time series.  nested_modeltime_tbl %&gt;%    extract_nested_test_accuracy() %&gt;%   table_modeltime_accuracy(.interactive  F)                    Accuracy Table                            id       .model_id       .model_desc       .type       mae       mape       mase       smape       rmse       rsq                1_1 1 PROPHET Test 10071.47 45.88 1.99 59.97 11776.87 0.38     1_1 2 XGBOOST Test 6236.79 25.31 1.23 24.57 9017.22 0.19     1_3 1 PROPHET Test 3539.80 29.87 1.37 25.46 4707.77 0.80     1_3 2 XGBOOST Test 3085.78 18.81 1.20 20.40 5085.81 0.79     1_8 1 PROPHET Test 4282.96 11.15 1.82 11.96 4845.08 0.00     1_8 2 XGBOOST Test 3585.77 9.33 1.53 9.89 4009.47 0.30     1_13 1 PROPHET Test 6861.13 17.02 2.53 18.78 7309.61 0.15     1_13 2 XGBOOST Test 2338.42 5.83 0.86 6.02 2721.47 0.54     1_38 1 PROPHET Test 26007.21 32.57 2.22 39.60 27938.83 0.08     1_38 2 XGBOOST Test 6847.04 8.47 0.58 8.75 8825.28 0.40     1_93 1 PROPHET Test 17165.30 21.37 1.73 24.46 19123.17 0.03     1_93 2 XGBOOST Test 7233.95 9.11 0.73 9.66 8879.21 0.49     1_95 1 PROPHET Test 22836.06 18.30 2.75 20.37 24094.49 0.48     1_95 2 XGBOOST Test 10783.75 8.54 1.30 8.96 12843.50 0.14              Extract Nested Test Forecast  Next, we can visualize the test forecast with extract_nested_test_forecast().  nested_modeltime_tbl %&gt;%    extract_nested_test_forecast() %&gt;%   group_by(id) %&gt;%   plot_modeltime_forecast(     .facet_ncol   2,     .interactive  FALSE   )    Extract Nested Error Logs  If any of the models have errors, then we can investigate the error logs with extract_nested_error_report(). Fortunately, we don\u2019t have any errors, but if we did we could investigate further.  nested_modeltime_tbl %&gt;%    extract_nested_error_report()  ## # A tibble: 0 \u00d7 4 ## # \u2026 with 4 variables: id &lt;fct&gt;, .model_id &lt;int&gt;, .model_desc &lt;chr&gt;, ## #   .error_desc &lt;chr&gt;  Step 4: Select the Best  Using the accuracy data, we can pick a metric and select the best model based on that metric. The available metrics are in the default_forecast_accuracy_metric_set(). Make sure to select minimize based on the metric. The filter_test_forecasts parameter tells the function to filter the logged test forecasts to just the best.  best_nested_modeltime_tbl &lt;- nested_modeltime_tbl %&gt;%             modeltime_nested_select_best(               metric                 \"rmse\",                minimize               TRUE,                filter_test_forecasts  TRUE             )  This identifies which models should be used for the final forecast. With the models selected, we can make the future forecast.  Extract Nested Best Model Report  The best model selections can be accessed with extract_nested_best_model_report().  best_nested_modeltime_tbl %&gt;%   extract_nested_best_model_report()  ## # Nested Modeltime Table ##   # A tibble: 7 \u00d7 10 ##   id    .model_id .model_desc .type    mae  mape  mase smape   rmse   rsq ##   &lt;fct&gt;     &lt;int&gt; &lt;chr&gt;       &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; ## 1 1_1           2 XGBOOST     Test   6237. 25.3  1.23  24.6   9017. 0.191 ## 2 1_3           1 PROPHET     Test   3540. 29.9  1.37  25.5   4708. 0.796 ## 3 1_8           2 XGBOOST     Test   3586.  9.33 1.53   9.89  4009. 0.297 ## 4 1_13          2 XGBOOST     Test   2338.  5.83 0.861  6.02  2721. 0.536 ## 5 1_38          2 XGBOOST     Test   6847.  8.47 0.585  8.75  8825. 0.402 ## 6 1_93          2 XGBOOST     Test   7234.  9.11 0.728  9.66  8879. 0.488 ## 7 1_95          2 XGBOOST     Test  10784.  8.54 1.30   8.96 12843. 0.139  Extract Nested Best Test Forecasts  Once we\u2019ve selected the best models, we can easily visualize the best forecasts by time series. Note that the nested test forecast logs have been modified to isolate the best models.  best_nested_modeltime_tbl %&gt;%   extract_nested_test_forecast() %&gt;%   group_by(id) %&gt;%   plot_modeltime_forecast(     .facet_ncol   2,     .interactive  FALSE   )    Step 5: Refitting and Future Forecast  With the best models in hand, we can make our future forecasts by refitting the models to the full dataset.          If the best models have been selected, the only the best models will be refit.           If best models have not been selected, then all models will be refit.      We\u2019ve selected our best models, and will move forward with refitting and future forecast logging using the modeltime_nested_refit() function.  nested_modeltime_refit_tbl &lt;- best_nested_modeltime_tbl %&gt;%     modeltime_nested_refit(         control  control_nested_refit(verbose  TRUE)     )  ## \u2139  Starting Modeltime Table: ID 1_1... ## \u2713 Model 2 Passed XGBOOST. ## \u2713  Finished Modeltime Table: ID 1_1  ## \u2139  Starting Modeltime Table: ID 1_3... ## \u2713 Model 1 Passed PROPHET. ## \u2713  Finished Modeltime Table: ID 1_3  ## \u2139  Starting Modeltime Table: ID 1_8... ## \u2713 Model 2 Passed XGBOOST. ## \u2713  Finished Modeltime Table: ID 1_8  ## \u2139  Starting Modeltime Table: ID 1_13... ## \u2713 Model 2 Passed XGBOOST. ## \u2713  Finished Modeltime Table: ID 1_13  ## \u2139  Starting Modeltime Table: ID 1_38... ## \u2713 Model 2 Passed XGBOOST. ## \u2713  Finished Modeltime Table: ID 1_38  ## \u2139  Starting Modeltime Table: ID 1_93... ## \u2713 Model 2 Passed XGBOOST. ## \u2713  Finished Modeltime Table: ID 1_93  ## \u2139  Starting Modeltime Table: ID 1_95... ## \u2713 Model 2 Passed XGBOOST. ## \u2713  Finished Modeltime Table: ID 1_95  ## Finished in: 3.52616 secs.  Note that we used control_nested_refit(verbose  TRUE) to display the modeling results as each model is refit. This is not necessary, but can be useful to follow the nested model fitting process.  We can see that the nested modeltime table appears the same, but has now been trained on .actual_data.  nested_modeltime_refit_tbl  ## # Nested Modeltime Table ## # Trained on: .actual_data | Model Errors:  ## # A tibble: 7 \u00d7 5 ##   id    .actual_data       .future_data     .splits        .modeltime_tables     ##   &lt;fct&gt; &lt;list&gt;             &lt;list&gt;           &lt;list&gt;         &lt;list&gt;                ## 1 1_1   &lt;tibble &gt; &lt;tibble [52 \u00d7 2\u2026 &lt;split [52\/52\u2026 &lt;mdl_time_tbl [1 \u00d7 5\u2026 ## 2 1_3   &lt;tibble &gt; &lt;tibble [52 \u00d7 2\u2026 &lt;split [52\/52\u2026 &lt;mdl_time_tbl [1 \u00d7 5\u2026 ## 3 1_8   &lt;tibble &gt; &lt;tibble [52 \u00d7 2\u2026 &lt;split [52\/52\u2026 &lt;mdl_time_tbl [1 \u00d7 5\u2026 ## 4 1_13  &lt;tibble &gt; &lt;tibble [52 \u00d7 2\u2026 &lt;split [52\/52\u2026 &lt;mdl_time_tbl [1 \u00d7 5\u2026 ## 5 1_38  &lt;tibble &gt; &lt;tibble [52 \u00d7 2\u2026 &lt;split [52\/52\u2026 &lt;mdl_time_tbl [1 \u00d7 5\u2026 ## 6 1_93  &lt;tibble &gt; &lt;tibble [52 \u00d7 2\u2026 &lt;split [52\/52\u2026 &lt;mdl_time_tbl [1 \u00d7 5\u2026 ## 7 1_95  &lt;tibble &gt; &lt;tibble [52 \u00d7 2\u2026 &lt;split [52\/52\u2026 &lt;mdl_time_tbl [1 \u00d7 5\u2026  Extract Nested Future Forecast  After the refitting process completes, we can now access the future forecast, which is logged.  nested_modeltime_refit_tbl %&gt;%   extract_nested_future_forecast() %&gt;%   group_by(id) %&gt;%   plot_modeltime_forecast(     .interactive  FALSE,     .facet_ncol   2   )    Summary  We\u2019ve now successfully completed a Nested Forecast. You may find this challenging, especially if you are not familiar with the Modeltime Workflow, terminology, or tidymodeling in R. If this is the case, we have a solution. Take our high-performance time series forecasting course.  \ud83d\udc47  There\u2019s a lot to learn  There\u2019s a lot more to learning time series:     Many more algorithms   Feature Engineering for Time Series   Ensembling   Machine Learning   Deep Learning   Scalable Modeling: 10,000+ time series   Your probably thinking how am I ever going to learn time series forecasting. Here\u2019s the solution that will save you years of struggling.  It gets betterYou\u2019ve just scratched the surface, here\u2019s what\u2019s coming\u2026  The Modeltime Ecosystem functionality is much more feature-rich than what we\u2019ve covered here (I couldn\u2019t possibly cover everything in this post). \ud83d\ude00  Here\u2019s what I didn\u2019t cover:          Feature Engineering: We can make this forecast much more accurate by including features from competition-winning strategies           Ensemble Modeling: We can stack models together to make super-learners that stabilize predictions.           Deep Learning: We can use GluonTS Deep Learning for developing high-performance, scalable forecasts.      So how are you ever going to learn time series analysis and forecasting?  You\u2019re probably thinking:     There\u2019s so much to learn   My time is precious   I\u2019ll never learn time series   I have good news that will put those doubts behind you.  You can learn time series analysis and forecasting in hours with my high-performance time series forecasting course. \ud83d\udc47  High-Performance Time Series CourseBecome the times series expert in your organization.  My High-Performance Time Series Forecasting in R course is available now. You\u2019ll learn timetk and modeltime plus the most powerful time series forecasting techniques available like GluonTS Deep Learning. Become the times series domain expert in your organization.  \ud83d\udc49 High-Performance Time Series Course.                          You will learn:     Time Series Foundations - Visualization, Preprocessing, Noise Reduction, &amp; Anomaly Detection   Feature Engineering using lagged variables &amp; external regressors   Hyperparameter Tuning - For both sequential and non-sequential models   Time Series Cross-Validation (TSCV)   Ensembling Multiple Machine Learning &amp; Univariate Modeling Techniques (Competition Winner)   Deep Learning with GluonTS (Competition Winner)   and more.    Unlock the High-Performance Time Series Course   Have questions about Modeltime?  Make a comment in the chat below. \ud83d\udc47  And, if you plan on using modeltime for your business, it\u2019s a no-brainer - Join my Time Series Course.","keywords":"","datePublished":"2021-08-25T20:01:01-06:00","dateModified":"2021-08-26T00:01:01-06:00","author":{"@type":"Person","name":"Business Science","description":"","url":"https:\/\/www.r-bloggers.com\/author\/business-science\/","sameAs":[],"image":{"@type":"ImageObject","url":"https:\/\/secure.gravatar.com\/avatar\/13789f579f17c38cf45a483bab353e28?s=96&d=mm&r=g","height":96,"width":96}},"editor":{"@type":"Person","name":"Business Science","description":"","url":"https:\/\/www.r-bloggers.com\/author\/business-science\/","sameAs":[],"image":{"@type":"ImageObject","url":"https:\/\/secure.gravatar.com\/avatar\/13789f579f17c38cf45a483bab353e28?s=96&d=mm&r=g","height":96,"width":96}},"publisher":{"@id":"https:\/\/www.r-bloggers.com#Organization"},"image":[{"@type":"ImageObject","url":"https:\/\/www.business-science.io\/assets\/2021-08-26-modeltime-nested\/modeltime-nested.jpg","width":658,"height":688,"@id":"https:\/\/www.r-bloggers.com\/2021\/08\/introducing-iterative-nested-forecasting-with-modeltime\/#primaryimage"},{"@type":"ImageObject","url":"https:\/\/www.business-science.io\/assets\/2021-03-15-modeltime-h2o\/modeltime_ecosystem.jpg","width":1019,"height":572},{"@type":"ImageObject","url":"https:\/\/www.business-science.io\/assets\/2021-08-26-modeltime-nested\/modeltime-nested.jpg","width":658,"height":688},{"@type":"ImageObject","url":"https:\/\/www.business-science.io\/assets\/2021-08-26-modeltime-nested\/nested-logs.jpg","width":657,"height":688},{"@type":"ImageObject","url":"https:\/\/www.business-science.io\/figure\/source\/2021-08-26-modeltime-iterative-forecasting\/unnamed-chunk-5-1.png","width":800,"height":500},{"@type":"ImageObject","url":"https:\/\/www.business-science.io\/assets\/2021-08-26-modeltime-nested\/modeltime_nested_fit.jpg","width":695,"height":637},{"@type":"ImageObject","url":"https:\/\/www.business-science.io\/assets\/2021-08-26-modeltime-nested\/nested-core-functions.jpg","width":724,"height":540},{"@type":"ImageObject","url":"https:\/\/www.business-science.io\/figure\/source\/2021-08-26-modeltime-iterative-forecasting\/unnamed-chunk-11-1.png","width":800,"height":500},{"@type":"ImageObject","url":"https:\/\/www.business-science.io\/figure\/source\/2021-08-26-modeltime-iterative-forecasting\/unnamed-chunk-15-1.png","width":800,"height":500},{"@type":"ImageObject","url":"https:\/\/www.business-science.io\/figure\/source\/2021-08-26-modeltime-iterative-forecasting\/unnamed-chunk-18-1.png","width":800,"height":500},{"@type":"ImageObject","url":"https:\/\/www.business-science.io\/assets\/2020-06-05-timetk\/time_series_course.jpg","width":1024,"height":569},{"@type":"ImageObject","url":"https:\/\/www.business-science.io\/assets\/2020-06-17-acf\/time_series_course.jpg","width":1680,"height":1027},{"@type":"ImageObject","url":"https:\/\/www.filepicker.io\/api\/file\/jay1WUozSWCVHfFBEil3","width":1920,"height":1040}],"isPartOf":{"@id":"https:\/\/www.r-bloggers.com\/2021\/08\/introducing-iterative-nested-forecasting-with-modeltime\/#webpage"}}]}]
</script>

    <script type="2b35157d11c2ea52143dce53-text/javascript">
        var snp_f = [];
        var snp_hostname = new RegExp(location.host);
        var snp_http = new RegExp("^(http|https)://", "i");
        var snp_cookie_prefix = '';
        var snp_separate_cookies = false;
        var snp_ajax_url = 'https://www.r-bloggers.com/wp-admin/admin-ajax.php';
		var snp_ajax_nonce = '753b017854';
        var snp_ignore_cookies = false;
        var snp_enable_analytics_events = true;
        var snp_enable_mobile = false;
        var snp_use_in_all = false;
        var snp_excluded_urls = [];
        snp_excluded_urls.push('');    </script>
    <div class="snp-root">
        <input type="hidden" id="snp_popup" value="" />
        <input type="hidden" id="snp_popup_id" value="" />
        <input type="hidden" id="snp_popup_theme" value="" />
        <input type="hidden" id="snp_exithref" value="" />
        <input type="hidden" id="snp_exittarget" value="" />
        	<div id="snppopup-welcome" class="snp-pop-109583 snppopup"><input type="hidden" class="snp_open" value="scroll" /><input type="hidden" class="snp_show_on_exit" value="2" /><input type="hidden" class="snp_exit_js_alert_text" value="" /><input type="hidden" class="snp_exit_scroll_down" value="10" /><input type="hidden" class="snp_exit_scroll_up" value="10" /><input type="hidden" class="snp_open_scroll" value="45" /><input type="hidden" class="snp_close_scroll" value="10" /><input type="hidden" class="snp_optin_redirect_url" value="" /><input type="hidden" class="snp_show_cb_button" value="yes" /><input type="hidden" class="snp_popup_id" value="109583" /><input type="hidden" class="snp_popup_theme" value="theme6" /><input type="hidden" class="snp_overlay" value="disabled" /><input type="hidden" class="snp_cookie_conversion" value="30" /><input type="hidden" class="snp_cookie_close" value="180" /><div class="snp-fb snp-theme6">
    <div class="snp-subscribe-inner">
	<h1 class="snp-header"><i>Never miss an update! </i>
<br/>
<strong>Subscribe to R-bloggers</strong> to receive <br/>e-mails with the latest R posts.<br/>

<small>(You will not see this message again.)</small></h1>	<div class="snp-form">
	    <form action="https://api.follow.it/subscription-form/WFJiMk5MeWYwSzBGYlNmektaT1BoR0hubWVOUE9EZXpBbkxlVEFRTDMzV3VRMWpLQTZDdjRLZVdwL25pWWhNSVI5b1ltdGNicTFRVytkelR0azdFajZ1MFVKdzU0VVc1VTJQTldpWWJsSXVaUjBGTVdVQ201SHFVZ1JpSkpXSCt8OU1aQndsUjZOaGlGNUVtNHRESk9zUnN6SUJBcmdDZE9kNkdJL3hKa2wvOD0=/8" method="post" class="snp-subscribeform snp_subscribeform">
				<fieldset>
		    <div class="snp-field">
			<input type="text" name="email" id="snp_email" placeholder="Your E-mail..." class="snp-field snp-field-email" />		
		    </div>
		    <button type="submit" class="snp-submit">Submit</button>
		</fieldset>
	    </form>
	</div>
	<a href="#" class="snp_nothanks snp-close">Click here to close (This popup will not appear again)</a>    </div>
    </div>
<style>.snp-pop-109583 .snp-theme6 { max-width: 700px;}
.snp-pop-109583 .snp-theme6 h1 {font-size: 17px;}
.snp-pop-109583 .snp-theme6 { color: #a0a4a9;}
.snp-pop-109583 .snp-theme6 .snp-field ::-webkit-input-placeholder { color: #a0a4a9;}
.snp-pop-109583 .snp-theme6 .snp-field :-moz-placeholder { color: #a0a4a9;}
.snp-pop-109583 .snp-theme6 .snp-field :-ms-input-placeholder { color: #a0a4a9;}
.snp-pop-109583  .snp-theme6 .snp-field input { border: 1px solid #a0a4a9;}
.snp-pop-109583 .snp-theme6 .snp-field { color: #000000;}
.snp-pop-109583 .snp-theme6 { background: #f2f2f2;}
</style><script type="2b35157d11c2ea52143dce53-text/javascript">
jQuery(document).ready(function() {
});
</script>
</div>        <script type="2b35157d11c2ea52143dce53-text/javascript">
            var CaptchaCallback = function() {
                jQuery('.g-recaptcha').each(function(index, el) {
                    grecaptcha.render(el, {
                        'sitekey' : ''
                    });
                });
            };
        </script>
    </div>
    <script type="2b35157d11c2ea52143dce53-text/javascript">/* <![CDATA[ */!function(e,n){var r={"selectors":{"block":"pre","inline":"code"},"options":{"indent":4,"ampersandCleanup":true,"linehover":true,"rawcodeDbclick":false,"textOverflow":"scroll","linenumbers":false,"theme":"enlighter","language":"r","retainCssClasses":false,"collapse":false,"toolbarOuter":"","toolbarTop":"{BTN_RAW}{BTN_COPY}{BTN_WINDOW}{BTN_WEBSITE}","toolbarBottom":""},"resources":["https:\/\/www.r-bloggers.com\/wp-content\/plugins\/enlighter\/cache\/enlighterjs.min.css?4WJrVky+dDEQ83W","https:\/\/www.r-bloggers.com\/wp-content\/plugins\/enlighter\/resources\/enlighterjs\/enlighterjs.min.js"]},o=document.getElementsByTagName("head")[0],t=n&&(n.error||n.log)||function(){};e.EnlighterJSINIT=function(){!function(e,n){var r=0,l=null;function c(o){l=o,++r==e.length&&(!0,n(l))}e.forEach(function(e){switch(e.match(/\.([a-z]+)(?:[#?].*)?$/)[1]){case"js":var n=document.createElement("script");n.onload=function(){c(null)},n.onerror=c,n.src=e,n.async=!0,o.appendChild(n);break;case"css":var r=document.createElement("link");r.onload=function(){c(null)},r.onerror=c,r.rel="stylesheet",r.type="text/css",r.href=e,r.media="all",o.appendChild(r);break;default:t("Error: invalid file extension",e)}})}(r.resources,function(e){e?t("Error: failed to dynamically load EnlighterJS resources!",e):"undefined"!=typeof EnlighterJS?EnlighterJS.init(r.selectors.block,r.selectors.inline,r.options):t("Error: EnlighterJS resources not loaded yet!")})},(document.querySelector(r.selectors.block)||document.querySelector(r.selectors.inline))&&e.EnlighterJSINIT()}(window,console); /* ]]> */</script><script type="2b35157d11c2ea52143dce53-text/javascript" src='https://www.r-bloggers.com/wp-content/plugins/arscode-ninja-popups/js/jquery.ck.min.js?ver=5.5.5' id='jquery-np-cookie-js'></script>
<script type="2b35157d11c2ea52143dce53-text/javascript" src='https://www.r-bloggers.com/wp-content/plugins/arscode-ninja-popups/js/dialog_trigger.js?ver=5.5.5' id='js-dialog_trigger-js'></script>
<script type="2b35157d11c2ea52143dce53-text/javascript" src='https://www.r-bloggers.com/wp-content/plugins/arscode-ninja-popups/js/ninjapopups.min.js?ver=5.5.5' id='js-ninjapopups-js'></script>
<script type="2b35157d11c2ea52143dce53-text/javascript" src='https://www.r-bloggers.com/wp-content/plugins/arscode-ninja-popups/fancybox2/jquery.fancybox.min.js?ver=5.5.5' id='fancybox2-js'></script>
<script type="2b35157d11c2ea52143dce53-text/javascript" src='https://c0.wp.com/p/jetpack/7.3.3/_inc/build/photon/photon.min.js' id='jetpack-photon-js'></script>
<script type="2b35157d11c2ea52143dce53-text/javascript" id='flying-pages-js-before'>
window.FPConfig= {
	delay: 0,
	ignoreKeywords: ["\/wp-admin","\/wp-login.php","\/cart","add-to-cart","logout","#","?",".png",".jpeg",".jpg",".gif",".svg"],
	maxRPS: 3,
    hoverDelay: 50
};
</script>
<script type="2b35157d11c2ea52143dce53-text/javascript" src='https://www.r-bloggers.com/wp-content/plugins/flying-pages/flying-pages.min.js?ver=2.4.2' id='flying-pages-js' defer></script>
<script type="2b35157d11c2ea52143dce53-text/javascript" src='https://s0.wp.com/wp-content/js/devicepx-jetpack.js?ver=202134' id='devicepx-js'></script>
<script type="2b35157d11c2ea52143dce53-text/javascript" src='https://c0.wp.com/p/jetpack/7.3.3/_inc/build/lazy-images/js/lazy-images.min.js' id='jetpack-lazy-images-js'></script>
<script type="2b35157d11c2ea52143dce53-text/javascript" src='https://c0.wp.com/c/5.5.5/wp-includes/js/wp-embed.min.js' id='wp-embed-js'></script>
<script type="2b35157d11c2ea52143dce53-text/javascript" src='https://stats.wp.com/e-202134.js' async='async' defer='defer'></script>
<script type="2b35157d11c2ea52143dce53-text/javascript">
	_stq = window._stq || [];
	_stq.push([ 'view', {v:'ext',j:'1:7.3.3',blog:'11524731',post:'226663',tz:'-6',srv:'www.r-bloggers.com'} ]);
	_stq.push([ 'clickTrackerInit', '11524731', '226663' ]);
</script>
	<script type="2b35157d11c2ea52143dce53-text/javascript">
        jQuery(document).ready(function ($) {
            //$( document ).ajaxStart(function() {
            //});

			
            for (var i = 0; i < document.forms.length; ++i) {
                var form = document.forms[i];
				if ($(form).attr("method") != "get") { $(form).append('<input type="hidden" name="zDiKwgnYuUdGqV" value="_oqTX0M" />'); }
if ($(form).attr("method") != "get") { $(form).append('<input type="hidden" name="ARe_BCQubvMxnjy" value="fLPcXBWYs3g." />'); }
if ($(form).attr("method") != "get") { $(form).append('<input type="hidden" name="VhGclIgEXYsq" value="v@O.S3L7" />'); }
if ($(form).attr("method") != "get") { $(form).append('<input type="hidden" name="ZVcPOy" value="bzCx8t9" />'); }
            }

			
            $(document).on('submit', 'form', function () {
				if ($(this).attr("method") != "get") { $(this).append('<input type="hidden" name="zDiKwgnYuUdGqV" value="_oqTX0M" />'); }
if ($(this).attr("method") != "get") { $(this).append('<input type="hidden" name="ARe_BCQubvMxnjy" value="fLPcXBWYs3g." />'); }
if ($(this).attr("method") != "get") { $(this).append('<input type="hidden" name="VhGclIgEXYsq" value="v@O.S3L7" />'); }
if ($(this).attr("method") != "get") { $(this).append('<input type="hidden" name="ZVcPOy" value="bzCx8t9" />'); }
                return true;
            });

			
            jQuery.ajaxSetup({
                beforeSend: function (e, data) {

                    //console.log(Object.getOwnPropertyNames(data).sort());
                    //console.log(data.type);

                    if (data.type !== 'POST') return;

                    if (typeof data.data === 'object' && data.data !== null) {
						data.data.append("zDiKwgnYuUdGqV", "_oqTX0M");
data.data.append("ARe_BCQubvMxnjy", "fLPcXBWYs3g.");
data.data.append("VhGclIgEXYsq", "v@O.S3L7");
data.data.append("ZVcPOy", "bzCx8t9");
                    }
                    else {
                        data.data =  data.data + '&zDiKwgnYuUdGqV=_oqTX0M&ARe_BCQubvMxnjy=fLPcXBWYs3g.&VhGclIgEXYsq=v@O.S3L7&ZVcPOy=bzCx8t9';
                    }
                }
            });

        });
	</script>
	<script src="/cdn-cgi/scripts/7d0fa10a/cloudflare-static/rocket-loader.min.js" data-cf-settings="2b35157d11c2ea52143dce53-|49" defer=""></script></body>
</html>
<!-- Dynamic page generated in 3.979 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2021-08-26 13:11:58 -->

<!-- Compression = gzip -->